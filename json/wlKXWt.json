{"ver":"0.1","info":{"id":"wlKXWt","date":"1583901344","viewed":208,"name":"Jungle biome map + distortion","username":"jarble","description":"I added some sine-wave distortion to my jungle biome map. It looks much more realistic now.\n\nMove the mouse to zoom in and out!","likes":2,"published":3,"flags":0,"tags":[]},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n//This parameter changes the magnification.\nconst float mag = 9.0;\n\nconst int GREEN = 0;\nconst int BLUE = 1;\nconst int GRAY = 2;\nconst int YELLOW = 3;\nconst int WHITE = 4;\nconst int FOREST_GREEN = 5;\nconst int LIGHTBLUE = 6;\nconst int SKYBLUE = 7;\nconst int SNOW = 8;\nconst int WHITESMOKE = 9;\nconst int LIGHTGRAY = 10;\nconst int LIME = 11;\nconst int LIGHTYELLOW = 12;\nconst int BEIGE = 13;\nconst int SAND = 14;\nconst int TAN = 15;\n\nconst int SWAMP_BIOME = 1;\nconst int GLACIER_BIOME = 2;\nconst int FORESTS_AND_MOUNTAINS = 3;\nconst int SAVANNA_BIOME = 4;\nconst int FOREST_BIOME = 5;\n\n//this function is from https://www.shadertoy.com/view/4djSRW\nint hash12(vec2 p,float num_colors)\n{\n    //set the number of colors to be randomly generated\n    \n    vec3 p3  = fract(vec3(p.xyx) * .1031);\n    p3 += dot(p3, p3.yzx + 33.33);\n    return int(floor(fract((p3.x + p3.y) * p3.z)*num_colors));\n}\n\nfloat sin1(float x){\n\treturn sin(x)+sin(x*mag)/mag;\n}\n\n\nint magnify(vec2 fragCoord,float mag,float num_colors){\n    fragCoord += vec2(sin1(fragCoord.y/(100.0*mag))*10.0,sin1(fragCoord.x/(100.0*mag))*10.0)*mag*mag;\n    return hash12(floor(fragCoord/pow(3.0,mag)),num_colors);\n}\n\nivec4 get_neighbors(vec2 fragCoord,float mag,float colors){\n\treturn ivec4(magnify(fragCoord+vec2(0,1),mag,colors),\n        magnify(fragCoord+vec2(1,0),mag,colors),\n        magnify(fragCoord-vec2(0,1),mag,colors),\n        magnify(fragCoord-vec2(1,0),mag,colors));\n}\n\n\nbool is_next_to(int color,ivec4 neighbors){\n\treturn (neighbors.x == color)\n        || (neighbors.y == color)\n        || (neighbors.z == color)\n        || (neighbors.w == color);\n}\n\nvec3 rgb(float r,float g,float b){\n\treturn vec3(r,g,b)/255.0;\n}\n\nvec3 get_color(int color){\n    if(color == BLUE){\n    \treturn vec3(0.149,0.141,0.912);\n   \t}\n    else if(color == GREEN){\n    \treturn vec3(0.000,0.833,0.224);\n   \t}\n    else if(color == FOREST_GREEN){\n    \treturn rgb(34.0,139.0,34.0);\n   \t}\n    else if(color == WHITE){\n    \treturn vec3(1.0,1.0,1.0);\n   \t}\n    else if(color == GRAY){\n    \treturn vec3(192.0,192.0,192.0)/255.0;\n    }\n    else if(color == YELLOW){\n    \treturn vec3(1.0,1.0,0.0);\n   \t}\n    else if(color == LIGHTBLUE){\n    \treturn rgb(173.0,216.0,230.0);\n   \t}\n    else if(color == SKYBLUE){\n    \treturn rgb(135.0,206.0,235.0);\n    }\n    else if(color == SNOW){\n    \treturn rgb(255.0,250.0,250.0);\n    }\n    else if(color == WHITESMOKE){\n    \treturn rgb(245.0,245.0,245.0);\n    }\n    else if(color == LIGHTGRAY){\n    \treturn rgb(211.0,211.0,211.0);\n    }\n    else if(color == LIME){\n    \treturn rgb(0.0,255.0,0.0);\n    }\n    else if(color == LIGHTYELLOW){\n    \treturn rgb(255.0,255.0,153.0);\n    }\n    else if(color == BEIGE){\n    \treturn rgb(245.0,245.0,220.0);\n    }\n    else if(color == TAN){\n    \treturn rgb(210.,180.,140.);\n    }\n}\n\nint forest_biome(inout int color1, ivec4 neighbors){\n\tint BLUE = 0;\n    int GREEN = 1;\n    int YELLOW = 2;\n    int GRAY = 3;\n    int FOREST_GREEN = 4;\n    int WHITE = 5;\n    return (color1 == BLUE && is_next_to(GREEN,neighbors))\n        ? GREEN\n    :(color1 == YELLOW)\n        ? GREEN\n    :(color1 == WHITE && is_next_to(FOREST_GREEN,neighbors))\n        ? FOREST_GREEN\n    :(color1 == GRAY && is_next_to(GREEN,neighbors))\n        ? WHITE\n    :(color1 == GREEN && is_next_to(YELLOW,neighbors))\n        ? WHITE\n    :(color1 == GREEN && is_next_to(WHITE,neighbors))\n        ? FOREST_GREEN\n    :(color1 == FOREST_GREEN && is_next_to(GREEN,neighbors))\n        ? GREEN\n    :color1;\n\n}\n\nint savanna_biome(inout int color1, ivec4 neighbors){\n    int GREEN = 0;\n    int BLUE = 1;\n    int GRAY = 2;\n    int YELLOW = 3;\n    int FOREST_GREEN = 4;\n    return (color1 == GREEN && is_next_to(GRAY,neighbors))\n    \t? YELLOW\n    :(color1 == YELLOW && is_next_to(GRAY,neighbors))\n    \t? FOREST_GREEN\n    :(color1 == GRAY)\n        ? GREEN\n    :(color1 == BLUE && is_next_to(GREEN,neighbors))\n        ? GREEN\n    :(color1 == FOREST_GREEN && is_next_to(GREEN,neighbors))\n        ? GREEN\n    : color1;\n}\n\nint glacier_biome(inout int color1, ivec4 neighbors){\n\tint GREEN = 0;\n    int BLUE = 1;\n    int GRAY = 2;\n    int WHITE = 3;\n    int YELLOW = 4;\n    \n    return (color1 == GREEN && is_next_to(BLUE,neighbors))\n        ? GRAY\n    : (color1 == GREEN && is_next_to(WHITE,neighbors))\n        ? GRAY\n    : (color1 == BLUE && is_next_to(GREEN,neighbors))\n        ? WHITE\n    : (color1 == YELLOW && is_next_to(GREEN,neighbors))\n        ? GRAY\n    : (color1 == YELLOW && is_next_to(GRAY,neighbors))\n        ? BLUE\n    :(color1 == WHITE && is_next_to(YELLOW,neighbors))\n        ? GRAY\n    :(color1 == YELLOW && is_next_to(WHITE,neighbors))\n        ? WHITE\n    :(color1 == GRAY && is_next_to(BLUE,neighbors))\n        ? BLUE\n    :color1;\n}\n\nint swamp_biome(inout int color1, ivec4 neighbors){\n\tint BLUE = 0;\n    int GREEN = 1;\n    int YELLOW = 2;\n    int GRAY = 3;\n    int WHITE = 4;\n    return (color1 == GREEN && is_next_to(BLUE,neighbors))\n    \t? YELLOW\n    :(color1 == BLUE && is_next_to(GREEN,neighbors))\n        ? GREEN\n    :(color1 == YELLOW && is_next_to(GRAY,neighbors))\n        ? BLUE\n    :(color1 == GRAY && is_next_to(YELLOW,neighbors))\n        ? YELLOW\n    :(color1 == WHITE && is_next_to(YELLOW,neighbors))\n        ? GRAY\n    :(color1 == GRAY && is_next_to(BLUE,neighbors))\n        ? BLUE\n    :color1;\n}\n\nint forests_and_mountains(inout int color1, ivec4 neighbors){\n    int BLUE = 0;\n    int GREEN = 1;\n    int YELLOW = 2;\n    int GRAY = 3;\n    int WHITE = 4;\n    return (color1 == GREEN && is_next_to(BLUE,neighbors))\n    \t? YELLOW\n    :(color1 == BLUE && is_next_to(GREEN,neighbors))\n        ? GREEN\n    :(color1 == YELLOW && is_next_to(GREEN,neighbors))\n        ? GREEN\n    :(color1 == YELLOW && is_next_to(GRAY,neighbors))\n        ? BLUE\n    :(color1 == GRAY && is_next_to(YELLOW,neighbors))\n        ? WHITE\n    :(color1 == WHITE && is_next_to(YELLOW,neighbors))\n        ? GRAY\n    :(color1 == YELLOW && is_next_to(WHITE,neighbors))\n        ? WHITE\n    :(color1 == GRAY && is_next_to(BLUE,neighbors))\n        ? BLUE\n    :color1;\n}\n\nvoid biome(inout int color1, ivec4 neighbors,int biome){\n    color1 = (biome == FORESTS_AND_MOUNTAINS)\n        ? forests_and_mountains(color1,neighbors)\n    : (biome == GLACIER_BIOME) ?\n        glacier_biome(color1,neighbors)\n    : (biome == SWAMP_BIOME) ?\n        forests_and_mountains(color1,neighbors)\n    : (biome == SAVANNA_BIOME) ?\n    \tsavanna_biome(color1,neighbors)\n    : (biome == FOREST_BIOME) ?\n    \tforest_biome(color1,neighbors)\n    : color1;\n}\n\nint biome(in vec2 fragCoord,float mag,float zoom,int colors[5],int biome1){\n    fragCoord *= zoom;\n\n    \n    float num_colors = float(colors.length());\n    \n    int color1 = magnify(fragCoord,mag,num_colors);\n    \n    ivec4 neighbors;\n    \n    while(mag > 1.0){\n    neighbors = get_neighbors(fragCoord,mag,num_colors);\n    biome(color1, neighbors,biome1);\n    mag -= 1.0;\n    }\n    return colors[int(color1)];;\n}\n\nint biome(in vec2 fragCoord,float mag,float zoom,int colors[6],int biome1){\n    fragCoord *= zoom;\n\n    \n    float num_colors = float(colors.length());\n    \n    int color1 = magnify(fragCoord,mag,num_colors);\n    \n    ivec4 neighbors;\n    \n    while(mag > 1.0){\n    neighbors = get_neighbors(fragCoord,mag,num_colors);\n    biome(color1, neighbors,biome1);\n    mag -= 1.0;\n    }\n    return colors[int(color1)];;\n}\n\nint forest_biome(in vec2 fragCoord,float mag,float zoom,int[6] colors){\n    return biome(fragCoord,mag,zoom,colors,FOREST_BIOME);\n}\n\nint forest_biome(in vec2 fragCoord,float mag,float zoom){\n\treturn forest_biome(fragCoord,mag,zoom,int[](BLUE,GREEN,YELLOW,GRAY,FOREST_GREEN,WHITE));\n}\n\nint savanna_biome(in vec2 fragCoord,float mag,float zoom,int[5] colors){\n    return biome(fragCoord,mag,zoom,colors,SAVANNA_BIOME);\n}\n\nint savanna_biome(in vec2 fragCoord,float mag,float zoom){\n\treturn savanna_biome(fragCoord,mag,zoom,int[](GREEN,BLUE,GRAY,YELLOW,FOREST_GREEN));\n}\n\nint glacier_biome(in vec2 fragCoord,float mag,float zoom,int[5] colors){\n    return biome(fragCoord,mag,zoom,colors,GLACIER_BIOME);\n}\n\nint glacier_biome(in vec2 fragCoord,float mag,float zoom){\n\treturn glacier_biome(fragCoord,mag,zoom,int[](GREEN,BLUE,GRAY,WHITE,YELLOW));\n}\n\nint swamp_biome(in vec2 fragCoord,float mag,float zoom,int[5] colors){\n    return biome(fragCoord,mag,zoom,colors,SWAMP_BIOME);\n}\n\nint swamp_biome(in vec2 fragCoord,float mag,float zoom){\n\treturn swamp_biome(fragCoord,mag,zoom,int[](BLUE,GREEN,YELLOW,GRAY,WHITE));\n}\n\nint water_biome(in vec2 fragCoord,float mag,float zoom,int colors[2]){\n    float num_colors = float(colors.length());\n    int color1 = magnify(fragCoord,mag,num_colors);\n    ivec4 neighbors;\n    \n    while(mag > 1.0){\n        neighbors = get_neighbors(fragCoord,mag,num_colors);\n    if(color1 == colors[0] && is_next_to(colors[1],neighbors)){\n    \tcolor1 = colors[1];\n    }\n    else if(color1 == colors[1] && is_next_to(colors[0],neighbors)){\n        color1 = colors[0];\n    }\n    mag -= 1.0;\n    }\n    return colors[color1];\n}\n\nint water_biome(in vec2 fragCoord,float mag,float zoom){\n\treturn water_biome(fragCoord,mag,zoom,int[](GREEN,BLUE));\n}\t\n\n\n\nint forests_and_mountains(in vec2 fragCoord,float mag,float zoom,int[5] colors){\n    return biome(fragCoord,mag,zoom,colors,FORESTS_AND_MOUNTAINS);\n}\n\nint forests_and_mountains(in vec2 fragCoord,float mag,float zoom){\n\treturn forests_and_mountains(fragCoord,mag,zoom,int[](BLUE,GREEN,YELLOW,GRAY,WHITE));\n}\n\nint combined_savanna_biome(in vec2 fragCoord,float mag,float zoom){\n    int color1 = forest_biome(fragCoord,mag,mag/3.0);\n    if(color1 == FOREST_GREEN){\n    \tcolor1 = forest_biome(fragCoord,mag,zoom,int[](BLUE,GREEN,YELLOW,TAN,FOREST_GREEN,LIME));\n    }\n    else if(color1 == WHITE){\n    \tcolor1 = glacier_biome(fragCoord,mag,zoom,int[](GREEN,BLUE,TAN,YELLOW,WHITE));\n    }\n    else if(color1 == GRAY){\n    \tcolor1 = glacier_biome(fragCoord,mag,zoom,int[](FOREST_GREEN,BLUE,GREEN,YELLOW,WHITE));\n    }\n    else if(color1 == YELLOW){\n    \tcolor1 = forest_biome(fragCoord,mag,zoom,int[](BLUE,GREEN,LIME,FOREST_GREEN,YELLOW,LIGHTYELLOW));\n    }\n    else if(color1 == GREEN){\n    \tcolor1 = forest_biome(fragCoord,mag,zoom,int[](BLUE,GREEN,YELLOW,BEIGE,FOREST_GREEN,LIME));\n    }\n    else if(color1 == BLUE){\n    \tcolor1 = savanna_biome(fragCoord,mag,zoom,int[](SKYBLUE,YELLOW,FOREST_GREEN,BLUE,LIGHTBLUE));\n    }\n    return color1;\n}\n\nint combined_glacier_biome(in vec2 fragCoord,float mag,float zoom){\n    fragCoord *= zoom;\n    int color1 = glacier_biome(fragCoord,mag,mag/81.0,int[](GREEN,BLUE,GRAY,WHITE,YELLOW));\n\n    return (color1 == GRAY)\n    \t? glacier_biome(fragCoord,mag,zoom,int[](SNOW,GRAY,WHITESMOKE,WHITE,SKYBLUE))\n    :(color1 == WHITE)\n    \t? glacier_biome(fragCoord,mag,zoom,int[](GRAY,LIGHTGRAY,WHITESMOKE,WHITE,SKYBLUE))\n    :(color1 == GREEN)\n   \t\t? forests_and_mountains(fragCoord,mag,zoom,int[](BLUE,SKYBLUE,SNOW,GRAY,WHITE))\n    :(color1 == BLUE)\n    \t? glacier_biome(fragCoord,mag,zoom,int[](GREEN,BLUE,SKYBLUE,LIGHTBLUE,WHITE))\n    : color1;\n}\n\nint deserts_and_plains(in vec2 fragCoord,float mag,float zoom){\n    fragCoord *= zoom;\n    int color1 = glacier_biome(fragCoord,mag,mag/81.0,int[](GREEN,YELLOW,GRAY,WHITE,BLUE));\n    return (color1 == GRAY)\n    \t? forest_biome(fragCoord,mag,zoom,int[](GRAY,YELLOW,FOREST_GREEN,GREEN,TAN,LIME))\n    :(color1 == WHITE)\n    \t? forest_biome(fragCoord,mag,zoom,int[](BLUE,FOREST_GREEN,YELLOW,TAN,GREEN,LIME))\n    :(color1 == YELLOW)\n    \t? forest_biome(fragCoord,mag,zoom,int[](BLUE,YELLOW,FOREST_GREEN,TAN,GREEN,LIME))\n    :(color1 == GREEN)\n   \t\t? forests_and_mountains(fragCoord,mag,zoom,int[](TAN,LIME,SNOW,GRAY,YELLOW))\n    :(color1 == BLUE)\n    \t? glacier_biome(fragCoord,mag,zoom,int[](GREEN,YELLOW,SKYBLUE,LIGHTBLUE,BLUE))\n    :color1;\n}\n\nint combined_biome(in vec2 fragCoord,float mag,float zoom){\n    int color1 = glacier_biome(fragCoord,mag,mag/729.0);\n    return color1 == FOREST_GREEN\n    \t? forest_biome(fragCoord,mag,zoom)\n    : color1 == WHITE\n    \t? glacier_biome(fragCoord,mag,zoom)\n    : color1 == GRAY\n    \t? savanna_biome(fragCoord,mag,zoom)\n    : color1 == GREEN\n    \t? forests_and_mountains(fragCoord,mag,zoom)\n    : color1 == BLUE\n    \t? savanna_biome(fragCoord,mag,zoom,int[](LIGHTBLUE,YELLOW,FOREST_GREEN,SKYBLUE,BLUE))\n    : color1;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float zoom = mag;\n    fragCoord *= zoom*(((iMouse.x-iMouse.y)*2.0+iResolution.x)/iResolution.x);\n    fragCoord = fragCoord + floor(iTime*100.0)*vec2(zoom,0.0);\n\n    //choose the biome here\n\tint biome =\n        //forest_biome\n    \t//savanna_biome\n        //glacier_biome\n        //swamp_biome\n        //combined_glacier_biome\n        //combined_biome\n        combined_savanna_biome\n        //deserts_and_plains\n        //forests_and_mountains\n    (fragCoord,mag,1.0);\n    \n    fragColor = vec4(get_color(biome),1.0);\n}","name":"Image","description":"","type":"image"}]}