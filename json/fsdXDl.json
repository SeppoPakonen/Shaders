{"ver": "0.1", "info": {"id": "fsdXDl", "date": "1634167557", "viewed": 30, "name": "goldenRatioHash (floats only)", "username": "Envy24", "description": "Left side  : hash without seed\nRight side: hash with seed", "likes": 3, "published": 1, "flags": 0, "usePreview": 0, "tags": [], "requires": ["library", "imagebuf"]}, "renderpass": [{"inputs": [], "outputs": [{"id": "4dfGRr", "channel": 0}], "code": "#define R  iResolution\n#define MX (iMouse.x / R.x + 0.1)\n\n/*\n    Hash with uniform distribution.\n    Works fine for range [0.1; 1e6].\n    Not always look good.\n \n    For 8388608 tested samples in range [0.0; 1.0] shows this statistics:\n        Histogram with 0.1 column width:\n            854844 825298 823153 824903 829215 834342 840773 844517 846493 865070\n            \n\n        Shannon enthropy                  =3.321747\n        Area of unit circle (Monte-Carlo) =3.119030\n        Mathematical expectation          =0.502320\n        Dispersion                        =0.084333\n        Standart deviation                =0.290402\n    \n    return value in range [0.0; 1.0].\n*/\nfloat golderRatioHash(float x)\n{\n    float y = (100. + x);\n    float m = mod(1e3 * y, 11.67115450f);\n    float f = fract(m * (m * y));\n    float a = (f - m) * 6.18034029f;\n\n    return fract(a * fract(a * fract(a)));\n}\n\nfloat golderRatioHash2(vec2 p, float w)\n{ \n    return golderRatioHash(clamp(p.y * w + p.x, 0.1, 1e6));\n}\n\nfloat golderRatioHashWithSeed(float x, float seed)\n{\n    float y = (100. + x);\n    float m = mod(1e3 * y, 11.67115450f * seed);\n    float f = fract(m * (m * y));\n    float a = (f - m) * 6.18034029f;\n\n    return fract(a * fract(a * fract(a)));\n}\n\nfloat golderRatioHash2WithSeed(vec2 p, float w, float seed)\n{ \n    return golderRatioHashWithSeed(clamp(p.y * w + p.x, 0.1, 1e6), seed);\n}\n\nvoid mainImage( out vec4 O, in vec2 P )\n{\n    vec2 uv = P/R.xy;\n    \n    // Left side?\n    if (uv.x < 0.5) { O = vec4(golderRatioHash2(uv * MX * 1e3, R.x)); }\n    else {\n        float seed = 1.61803401f; // golder_ratio)\n        O = vec4(golderRatioHash2WithSeed(uv * MX * 1e2, R.x, seed));\n    }\n}", "name": "Image", "description": "", "type": "image"}, {"inputs": [], "outputs": [], "code": "/*\n    Returns float in range [0.0; 1.0].\n*/\nfloat oldGoldenRatioHash(vec2 p)\n{\n    float xyg = (p.x + 1.61803401f) * (p.y - 161.03401f); \n    float a = (xyg * xyg * xyg) * 10001.0 * (p.x + p.y);\n    \n    return a - floor(a);\n    //return fract(a);      // black screen.\n}\n\nfloat golderRatioHash_(float x)\n{\n    float m = mod(1e6 * x, 6.123f * 1.61803401f);\n    float f = fract(m * (m * x));\n    float a = (f - m) * 6.18034029;\n\n    return fract(a * fract(a * fract(a * m)));\n}", "name": "Common", "description": "", "type": "common"}]}