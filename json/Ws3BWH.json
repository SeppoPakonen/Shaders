{"ver":"0.1","info":{"id":"Ws3BWH","date":"1604918237","viewed":86,"name":"SDF for oval - for comments","username":"sylvain69780","description":"This is a cheap way to get a shape like the Rugby balloon shape, citrus or an airship shape with exact distance.\nThis is of course a similar formula that one's used for IQ's Simple Egg, Vesica or Capsule 2D SDF\n","likes":4,"published":1,"flags":0,"usePreview":0,"tags":[]},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\n    SDF for oval - for comments\n    ---------------------------\n    \n    Related references\n    \n    IQ Distance functions\n    https://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n    \n    Variant of IQ's Vesica - mrange \n    https://www.shadertoy.com/view/NtfSDn\n    \n    SDF for Moss's Egg - for comment\n    https://www.shadertoy.com/view/wsBBR3\n\n*/\n\nfloat sdOval2( in vec2 p, float a,in float b, in float h ) \n{\n    p = abs(p);\n    float r = (a-b);\n    h+=r;\n    float l=(h*h - r*r)/(2.*r);  \n    return (p.y-h)*l > p.x*h  ? length(p-vec2(0.,h)) - ((a+l)-length(vec2(h,l))) : \n                                   length(p+vec2(l,0.)) - (a+l);\n}\n\n// without division \nfloat sdOval( in vec2 p, float r,in float l, in float h )\n{\n    p = abs(p);\n    return ((p.y-h)*l > p.x*h)   ? length(p-vec2(0.,h)) - ((r+l)-length(vec2(h,l))) : \n                                   length(p+vec2(l,0.)) - (r+l);\n}\n\n#define KEYFS 5\n\nvec3 keyf ( int idx ) {\n     return vec3[]( \n         vec3(0.5,0.5*(2.-sqrt(2.)),0.5*(2.-sqrt(2.))),  // Moss Egg proportions settings\n         vec3(0.5,0.1,0.5) ,\n         vec3(0.5,0.3,0.1) ,\n         vec3(0.2,0.15,0.9) ,\n         vec3(0.49,0.40,0.7) \n     ) [idx];\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // normalized pixel coordinates\n    vec2 uv = (fragCoord*2.0-iResolution.xy)/iResolution.y;\n    uv.xy=uv.yx;\n    // animation\n    float mixer = float(KEYFS)*fract(0.5*iTime/float(KEYFS));\n    int idx = int(mixer);\n    vec3 k1 = keyf(idx);\n    vec3 k2 = keyf((idx+1) % KEYFS );\n    vec3 k = mix(k1,k2,smoothstep(0.4,0.6,fract(mixer)));\n    float len = sdOval2(uv,k.x,k.y,k.z);\n    // coloring\n    vec3 col = vec3(1.0) - sign(len)*vec3(0.1,0.4,0.7);\n\tcol *= 1.0 - exp(-2.0*abs(len));\n\tcol *= 0.8 + 0.2*cos(128.0*abs(len));\n\tcol = mix( col, vec3(1.0), 1.0-smoothstep(0.0,0.015,abs(len)) );\n\n\tfragColor = vec4(col, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}