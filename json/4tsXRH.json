{"ver": "0.1", "info": {"id": "4tsXRH", "date": "1434489589", "viewed": 2401, "name": "Voronoi fast", "username": "davidbargo", "description": "Fast voronoi using a 2x2 search region (instead of 3x3) at the cost of a reduced maximum displacement for each cell.", "likes": 40, "published": 1, "flags": 0, "tags": ["voronoi", "water"], "requires": ["imagebuf"]}, "renderpass": [{"inputs": [], "outputs": [{"id": "4dfGRr", "channel": 0}], "code": "// Created by David Bargo - davidbargo/2015\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n#define ANIMATE\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 q = fragCoord.xy/iResolution.yy;\n    q.x += 2.0;\n    vec2 p = 10.*q*mat2(0.7071, -0.7071, 0.7071, 0.7071);\n    \n    vec2 pi = floor(p);    \n    vec4 v = vec4( pi.xy, pi.xy + 1.0);\n    v -= 64.*floor(v*0.015);\n    v.xz = v.xz*1.435 + 34.423;\n    v.yw = v.yw*2.349 + 183.37;\n    v = v.xzxz*v.yyww;\n    v *= v;\n    \n#ifdef ANIMATE\n    v *= iTime*0.000004 + 0.5;\n    vec4 vx = 0.25*sin(fract(v*0.00047)*6.2831853);\n    vec4 vy = 0.25*sin(fract(v*0.00074)*6.2831853);\n#else\n    vec4 vx = 0.5*(step(0.0,fract(v*0.00047)-0.5)-0.5);\n    vec4 vy = 0.5*(step(0.0,fract(v*0.00074)-0.5)-0.5);\n#endif\n    \n    vec2 pf = p - pi;\n    vx += vec4(0., 1., 0., 1.) - pf.xxxx;\n    vy += vec4(0., 0., 1., 1.) - pf.yyyy;\n    v = vx*vx + vy*vy;\n    \n    v.xy = min(v.xy, v.zw);\n    vec3 col = mix(vec3(0.0,0.4,0.9), vec3(0.0,0.95,0.9), min(v.x, v.y) );     \n\tfragColor = vec4(col, 1.0);\n}", "name": "Image", "description": "", "type": "image"}]}