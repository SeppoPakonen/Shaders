{"ver": "0.1", "info": {"id": "llfGR7", "date": "1419895854", "viewed": 535, "name": "Posterize and grayscale", "username": "Zielak", "description": "pixel_h, pixel_w - size of target pixels\ncolor_r - ramp points for color brightness", "likes": 4, "published": 1, "flags": 0, "tags": ["pixelat"], "requires": ["texture", "videobuf", "imagebuf"]}, "renderpass": [{"inputs": [{"id": "Xdf3Rn", "filepath": "/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm", "previewfilepath": "/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm", "type": "video", "channel": 0, "sampler": {"filter": "linear", "wrap": "clamp", "vflip": "false", "srgb": "false", "internal": "byte"}, "published": 1}], "outputs": [], "code": "const float pixel_w = 10.;\nconst float pixel_h = 10.;\nconst float color_r = 0.25;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat vx_offset = 0.5;\n    \n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    vec4 c = texture(iChannel0, uv);\n    vec3 tc = vec3(1., 0., 0.);\n    \n    vec2 coord = vec2(0.,0.);\n    \n    if(uv.x < (vx_offset-0.001))\n    {\n        float dx = 1./160.;\n        float dy = 1./144.;\n        coord = vec2(dx*floor(uv.x/dx),\n                     dy*floor(uv.y/dy));\n    }\n    else if (uv.x>=(vx_offset+0.001))\n    {\n        coord = uv;\n    }\n    \n    tc = texture(iChannel0, coord).rgb;\n    \n    // Ramp colors\n    float brightness = sqrt(\n        0.299* (tc.r*tc.r) +\n        0.587* (tc.g*tc.g) +\n        0.114* (tc.b*tc.b) );\n    float target_c = color_r*floor(brightness/color_r);\n    tc = vec3(target_c, target_c, target_c);\n    \n    \n\tfragColor = vec4(tc, 1.0);\n    \n    \n}", "name": "", "description": "", "type": "image"}]}