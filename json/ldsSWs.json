{"ver": "0.1", "info": {"id": "ldsSWs", "date": "1407975344", "viewed": 516, "name": "Trippy Rhythm Tunnel", "username": "dango", "description": "Inspired to make something trippy that goes with music. Still looks pretty cool with some other textures in channel0. The math that I added is pretty sloppy because I just tweaked it until I got something cool.\n\nBased on \"Deform - relief tunnel\" by iq", "likes": 4, "published": 1, "flags": 0, "tags": ["fft"], "requires": ["texture", "imagebuf", "musicbuf", "texturebuf"]}, "renderpass": [{"inputs": [{"id": "XdX3Rn", "filepath": "/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg", "previewfilepath": "/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg", "type": "texture", "channel": 0, "sampler": {"filter": "mipmap", "wrap": "repeat", "vflip": "false", "srgb": "false", "internal": "byte"}, "published": 1}, {"id": "4dfGzn", "filepath": "/media/a/ec8a6ea755d34600547a5353f21f0a453f9f55ff95514383b2d80b8d71283eda.mp3", "previewfilepath": "/media/ap/ec8a6ea755d34600547a5353f21f0a453f9f55ff95514383b2d80b8d71283eda.mp3", "type": "music", "channel": 1, "sampler": {"filter": "linear", "wrap": "clamp", "vflip": "false", "srgb": "false", "internal": "byte"}, "published": 1}], "outputs": [], "code": "// Derivative work of:\n//   Deform - relief tunnel by inigo quilez - iq/2013 \n//   License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n//   https://www.shadertoy.com/view/4sXGRn\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = -1.0 + 2.0 * fragCoord.xy / iResolution.xy;\n    vec2 uv;\n    \n    float f0 = texture( iChannel1, vec2( 0.025, 0.25 ) ).x;\n\tfloat f1 = texture( iChannel1, vec2( 0.20, 0.25 ) ).x;\n\tfloat f2 = texture( iChannel1, vec2( 0.60, 0.25 ) ).x;\n\tfloat f3 = texture( iChannel1, vec2( 0.85, 0.25 ) ).x;\n    \n    float ints = length(vec4(f0, f1, f2, f3)) * 1.25;\n    \n    float r = sqrt( dot(p,p) ) * (1.0 + f0 - f2);\n\t\n    float a = atan(p.y,p.x) \n        + 0.75*sin(0.5 / r + iTime) * (0.7 + 0.6 * f2)\n        - 1.75*cos(0.25 / r + iTime / 1.7) * (0.9 + 0.2 * f3);\n\t\n\tfloat h = (0.5 + 0.5*cos(9.0*a));\n\n\tfloat s = smoothstep(0.8,0.2,h);\n\n    uv.x = iTime * 2.0 - ints * 0.25 + 1.0/( r + .1*s);\n    uv.y = 3.0*a/3.1416;\n\n    float colorShift = ((ints-r) * 55.0 + iChannelTime[1] + 200.0) * (0.02 + 0.02 * ints);\n    vec3 col = texture(iChannel0,uv).xyz;\n\tcol *= 1.0 + 0.4 * ints;\n    col.zx = mix(col.yz, col.xy, sin(colorShift));\n    \n    float ao = smoothstep(0.0,0.3,h)-smoothstep(0.5,1.0,h);\n    col *= 1.0-0.6*ao*r;\n\tcol = col / r +  .05 / r / r;\n    \n    fragColor = vec4(col,1.0);\n}", "name": "", "description": "", "type": "image"}]}