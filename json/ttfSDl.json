{"ver": "0.1", "info": {"id": "ttfSDl", "date": "1564584597", "viewed": 475, "name": "-2D Shadows-", "username": "newbie2718", "description": "Implemented 2D shadows using Radial Blur.", "likes": 14, "published": 1, "flags": 32, "tags": ["radial"], "requires": ["texture", "imagebuf"]}, "renderpass": [{"inputs": [{"id": "4dXGR8", "filepath": "/media/previz/buffer00.png", "previewfilepath": "/media/previz/buffer00.png", "type": "buffer", "channel": 0, "sampler": {"filter": "linear", "wrap": "clamp", "vflip": "true", "srgb": "false", "internal": "byte"}, "published": 1}], "outputs": [{"id": "4dfGRr", "channel": 0}], "code": "const int   SAMPLES = 24;\nconst float POWER   = 1.0/float(SAMPLES);\nconst float DECAY   = 0.5;\nconst vec3  SHADOW_COL = vec3(0.0);\n\nfloat rand(vec2 seed) { return fract(sin(dot(seed.xy ,vec2(12.9898, 78.233)))*43758.5453); }\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    vec4 texc = texture(iChannel0, uv);\n    \n    float shadoww = 0.0;\n    vec2 lightp = iMouse.xy/iResolution.xy;\n    vec2 pc = (lightp-uv)*(1.0+(rand(uv+fract(iTime))*2.0-1.0)*0.1);\n    for(int i = 0; i < SAMPLES; ++i)\n    {\n\t\tshadoww += texture(iChannel0, uv+float(i)*DECAY/float(SAMPLES)*pc).a*POWER;        \n    }\n    \n    float mask = 1.0-texc.a;\n    vec3 col = mix(texc.rgb, SHADOW_COL, shadoww*mask);\n\n    float light = 1.0-length(uv-lightp);\n    col *= light;\n    \n    fragColor = vec4(col,1.0);\n}", "name": "Image", "description": "", "type": "image"}, {"inputs": [], "outputs": [{"id": "4dXGR8", "channel": 0}], "code": "void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord*2.0-iResolution.xy)/min(iResolution.x, iResolution.y);\n    vec2 tuv = fragCoord.xy/iResolution.xy;\n    \n    uv = fract(uv)*2.0-1.0;\n    \n    float d = 1.0-smoothstep(0.5, 0.52, abs(uv.x)+abs(uv.y));\n    \n    vec3 col = mix(vec3(0.5, 0.5, 0.4), vec3(0.9, 0.7, 0.5), d);\n   \n    fragColor = vec4(col, d);\n}", "name": "Buffer A", "description": "", "type": "buffer"}]}