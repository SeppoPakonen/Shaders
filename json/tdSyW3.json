{"ver":"0.1","info":{"id":"tdSyW3","date":"1587406830","viewed":67,"name":"Closest Point To Box","username":"MarvelousBilly","description":"The blue circle is the mouse and the green is the point on the box that the mouse is closest to.\nInside the box does not work though...","likes":2,"published":1,"flags":0,"usePreview":0,"tags":[]},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float sdBox(in vec2 P, in vec2 p, in vec2 b ){\n    p = P-p;\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nvec2 closestPointOnBox(vec2 P, vec2 p, vec2 b){\n    vec2 pB = max(abs(P-p)-b,0.0);\n    vec2 d = P - pB;\n    if(P.x < p.x-b.x){ d.x = P.x + pB.x; }\n   \tif(P.y < p.y-b.y){ d.y = P.y + pB.y; }\n    return d;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec3 col;\n    vec2 P = iMouse.xy;\n    vec2 BC = vec2(300.,180.); //box center\n    vec2 BS = vec2(100.,50.); //box size\n    \n    float D = sdBox(fragCoord,BC,BS); //draw rectangle\n    if (D >= 0.){ col = vec3(0.7); }\n    if (D <  0.){ col = vec3(0.); }\n    \n    //mouse dot\n    if(distance(fragCoord,P) < 10.){\n    \tcol = vec3(0.,0.,1.); \n    }\n    \n    vec2 cob = closestPointOnBox(P,BC,BS);\n    //on box dot\n    if(distance(fragCoord,cob) < 10.){\n    \tcol = vec3(0.,1.,0.); \n    }\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}