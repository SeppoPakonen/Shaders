{"ver": "0.1", "info": {"id": "WlXcDj", "date": "1593031346", "viewed": 164, "name": "Sandstone cave system", "username": "jarble", "description": "These caves are rendered using a [url=https://www.shadertoy.com/view/3tXyRN]\"minimal raymarching\"[/url] shader.", "likes": 2, "published": 3, "flags": 0, "tags": ["cave"], "requires": ["imagebuf"]}, "renderpass": [{"inputs": [], "outputs": [{"id": "4dfGRr", "channel": 0}], "code": "#define t iTime\n#define r iResolution\n#define scale 2 //to prevent rendering artifacts\n#define iterations 60*scale //number of raymarching steps\n\n//Based on https://www.shadertoy.com/view/3tXyRN\n\nvec3 surface_color(vec3 p)\n{\n    float color1 = length(sin(p))/2.0;\n    return vec3(color1,color1/1.8+sin(length(p)/10.0)/20.0,color1/2.0);\n}\n\nfloat SDF1(vec3 p){\n    return length(sin(p*.6)-sin(p))-1.4;\n}\n\nfloat SDF(vec3 p){\n\tfloat to_return = SDF1(p);\n    for(int i = 1; i <5;i++){\n        p += p.yzx/float(i);\n    \tto_return = min(to_return,SDF1(p));\n    }\n    return to_return/float(scale);\n}\n\nvoid mainImage( out vec4 o, in vec2 U )\n{\n    vec3 d=vec3(U/r.xy-.5,.5),p=vec3(0,6,t),q;\n    for(int i=0;i<iterations;i++)\n    {\n        p+=d*(-SDF(p));\n        if(i==iterations-5)q=p+=d=vec3(.6);\n    }\n    o+=vec4(surface_color(p*100.0)*100.0,0)/1e3*length(p-q)+(p.z-t)/float(iterations)*3.0*float(scale);\n}", "name": "Image", "description": "", "type": "image"}]}