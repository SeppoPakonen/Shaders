{"ver": "0.1", "info": {"id": "XlX3Rj", "date": "1423183174", "viewed": 3583, "name": "Circuits", "username": "Kali", "description": "A 2D fractal with some effects.", "likes": 193, "published": 1, "flags": 0, "tags": [], "requires": ["texture", "imagebuf", "musicbuf", "texturebuf"]}, "renderpass": [{"inputs": [{"id": "XdX3Rn", "filepath": "/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg", "previewfilepath": "/media/ap/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg", "type": "texture", "channel": 1, "sampler": {"filter": "mipmap", "wrap": "repeat", "vflip": "false", "srgb": "false", "internal": "byte"}, "published": 1}, {"id": "4sXGRr", "filepath": "/media/a/48e2d9ef22ca6673330b8c38a260c87694d2bbc94c19fec9dfa4a1222c364a99.mp3", "previewfilepath": "/media/ap/48e2d9ef22ca6673330b8c38a260c87694d2bbc94c19fec9dfa4a1222c364a99.mp3", "type": "music", "channel": 0, "sampler": {"filter": "linear", "wrap": "clamp", "vflip": "false", "srgb": "false", "internal": "byte"}, "published": 1}], "outputs": [], "code": "// This content is under the MIT License.\n\n#define time iTime*.02\n\n\n#define width .005\nfloat zoom = .18;\n\nfloat shape=0.;\nvec3 color=vec3(0.),randcol;\n\nvoid formula(vec2 z, float c) {\n\tfloat minit=0.;\n\tfloat o,ot2,ot=ot2=1000.;\n\tfor (int i=0; i<9; i++) {\n\t\tz=abs(z)/clamp(dot(z,z),.1,.5)-c;\n\t\tfloat l=length(z);\n\t\to=min(max(abs(min(z.x,z.y)),-l+.25),abs(l-.25));\n\t\tot=min(ot,o);\n\t\tot2=min(l*.1,ot2);\n\t\tminit=max(minit,float(i)*(1.-abs(sign(ot-o))));\n\t}\n\tminit+=1.;\n\tfloat w=width*minit*2.;\n\tfloat circ=pow(max(0.,w-ot2)/w,6.);\n\tshape+=max(pow(max(0.,w-ot)/w,.25),circ);\n\tvec3 col=normalize(.1+texture(iChannel1,vec2(minit*.1)).rgb);\n\tcolor+=col*(.4+mod(minit/9.-time*10.+ot2*2.,1.)*1.6);\n\tcolor+=vec3(1.,.7,.3)*circ*(10.-minit)*3.*smoothstep(0.,.5,.15+texture(iChannel0,vec2(.0,1.)).x-.5);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 pos = fragCoord.xy / iResolution.xy - .5;\n\tpos.x*=iResolution.x/iResolution.y;\n\tvec2 uv=pos;\n\tfloat sph = length(uv); sph = sqrt(1. - sph*sph)*1.5; \n\tuv=normalize(vec3(uv,sph)).xy;\n\tfloat a=time+mod(time,1.)*.5;\n\tvec2 luv=uv;\n\tfloat b=a*5.48535;\n\tuv*=mat2(cos(b),sin(b),-sin(b),cos(b));\n\tuv+=vec2(sin(a),cos(a*.5))*8.;\n\tuv*=zoom;\n\tfloat pix=.5/iResolution.x*zoom/sph;\n\tfloat dof=max(1.,(10.-mod(time,1.)/.01));\n\tfloat c=1.5+mod(floor(time),6.)*.125;\n\tfor (int aa=0; aa<36; aa++) {\n\t\tvec2 aauv=floor(vec2(float(aa)/6.,mod(float(aa),6.)));\n\t\tformula(uv+aauv*pix*dof,c);\n\t}\n\tshape/=36.; color/=36.;\n\tvec3 colo=mix(vec3(.15),color,shape)*(1.-length(pos))*min(1.,abs(.5-mod(time+.5,1.))*10.);\t\n\tcolo*=vec3(1.2,1.1,1.0);\n\tfragColor = vec4(colo,1.0);\n}", "name": "Image", "description": "", "type": "image"}]}