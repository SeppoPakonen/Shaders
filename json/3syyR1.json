{"ver": "0.1", "info": {"id": "3syyR1", "date": "1602178992", "viewed": 150, "name": "Closest Point Neon Lines", "username": "DoubleRedGaming", "description": " First look at closest point, just recently learned about closest point and it's use cases.", "likes": 1, "published": 3, "flags": 0, "usePreview": 0, "tags": ["closest"], "requires": ["imagebuf"]}, "renderpass": [{"inputs": [], "outputs": [{"id": "4dfGRr", "channel": 0}], "code": "#define a1 vec2(0.5, -0.3)\n#define a2 vec2(0.8, 0.3)\n#define b1 vec2(0.2, -0.3)\n#define b2 vec2(-0.8, 0.3)\n\n#define pi 3.141\n\nvec2 closestpoint(vec2 a, vec2 b, vec2 p) {\n    vec2 pa = p-a;\n    vec2 ba = b-a;\n    float t = clamp(dot(pa, ba)/dot(ba, ba), 0.0, 1.0);\n    return mix(a, b, t);\n}\n\nfloat distclosestpoint(vec2 a, vec2 b, vec2 p) {\n    return length(closestpoint(a, b, p) - p);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float t = iTime;\n    vec2 res = iResolution.xy;\n    vec3 m = iMouse.xyz;\n    vec2 uv = (fragCoord.xy - (0.5 * res.xy)) / res.y;\n    vec2 muv = (m.xy - (0.5 * res.xy)) / res.y;\n    \n    vec3 col = vec3(0.0);\n    \n    if (m.z <= 0.0) muv = vec2(sin(t * pi * 0.25), cos(t * pi * 0.25)) * 0.45;\n    \n    float dist1 = distclosestpoint(a1, a2, uv); // Line 1\n    float dist2 = distclosestpoint(closestpoint(a1, a2, muv), muv, uv); // Closest Point Line 1\n    \n    float dist3 = distclosestpoint(b1, b2, uv); // Line 2\n    float dist4 = distclosestpoint(closestpoint(b1, b2, muv), muv, uv); // Closest Point Line 2\n    \n    col += smoothstep(4.0/res.x, 0.0, dist1) * vec3(0.25, 0.5, 0.3);  // base line 1\n    col += smoothstep(16.0/res.x, 0.0, dist1) * vec3(0.25, 0.5, 0.3); // glow 1\n    \n    col += smoothstep(4.0/res.x, 0.0, dist2) * vec3(0.5, 0.25, 0.25);  // base line 2\n    col += smoothstep(16.0/res.x, 0.0, dist2) * vec3(0.5, 0.25, 0.25); // glow 2\n    \n    col += smoothstep(4.0/res.x, 0.0, dist3) * vec3(0.4, 0.25, 0.5);  // base line 3\n    col += smoothstep(16.0/res.x, 0.0, dist3) * vec3(0.4, 0.25, 0.5); // glow 3\n    \n    col += smoothstep(4.0/res.x, 0.0, dist4) * vec3(0.5, 0.4, 0.25);  // base line 4\n    col += smoothstep(16.0/res.x, 0.0, dist4) * vec3(0.5, 0.4, 0.25); // glow 4\n    \n    fragColor = vec4(col,1.0);\n}", "name": "Image", "description": "", "type": "image"}]}