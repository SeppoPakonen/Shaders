{"ver":"0.1","info":{"id":"stjSWt","date":"1628894425","viewed":55,"name":"Nevoke preparty jam :D","username":"lechuga","description":"zozo <3","likes":3,"published":1,"flags":0,"usePreview":0,"tags":[]},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float t;\n#define rot(a) mat2(cos(a), sin(a), -sin(a), cos(a))\nfloat rn(float p){\n  return fract(sin(p*345.56)*455.);\n  }\nfloat c(float t){\n  t*=.31;\n  return mix(floor(rn(t)), floor(rn(t+1.)), pow(smoothstep(0., 1., fract(t)), 20.));\n}\nfloat sb(vec3 p, vec3 s){\n  p=abs(p)-s;\n  return max(max(p.x,p.y), p.z);\n}\nvoid fr(inout vec3 p){\n  for(float i = 0.; i < 3.;i++){\n    //p.xz *= ro);\n    //p.xz*=rot(t*.1);\n    //p.xy*=rot(t*.1);\n    \n    p.xz*=rot(t*.954);\n    p.yz*=rot(t*.641);\n    p.yx*=rot(t*.64);\n    p=abs(p)-25.;\n  }\n}\nfloat smin(float a, float b, float k){\n  float h=max(k-abs(a-b),0.);\n  return min(a,b)-h*h-k*(1.0/6.0);\n}\nfloat g1,g2,g3;\nfloat m(vec3 p){\n  //p.y += sin(t)*.5+.5;\n  \n  vec3 p1=p;\n  //return\n  fr(p);\n  //p=(fract(p/20.-.5)-.5)*20.;\n  \n  float d = mix(length(p)-25., sb(p, vec3(10.)),.5+sin(t)*.5-.5);\n  float dd=sb(p1, vec3(35.));\n  float ddd=length(p1)-fract(sin(t*20.+p.y*.01));\n  \n  d=smin(d, dd, 1.);\n  g3+=.55/(1.+ddd*ddd);\n  g2+=.15/(.1+dd*dd);\n  g1+=.15/(.1+d*d);\n  return d;\n}\nvec3 nm(vec3 p){\n  vec2 e= vec2(0.031, 0.);\n  e=abs(e)+.25;\n  e*=rot(t*1.95);\n  return normalize(vec3(\n    e.xyy * (m(p-e.xyy)) +\n    e.yyx * (m(p-e.yyx)) +\n    e.yxy * (m(p-e.yxy)) +\n    e.xxx * (m(p-e.xxx))\n  ));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    t=mod(iTime, 236.)*.00055;\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    //t-=c(t*2.45)*15.;\n  t=sin(t*.251)*50.;\n  t+=c(t*.35)*200.;\n  vec3 col=vec3(0.);\n  float d;\n  vec3 s=vec3(0.01, 0.01, -4.);\n  s.x+=sin(t*100.);\n  s.z+=sin(t*50.)*20.;\n  const float tg=50.;\n  s.xz*=rot(t*tg);\n  s.yz*=rot(t*tg);\n  s.xy*=rot(t*tg);\n  //uv.x+=sin(t*.2436)*1.;\n  \n  //if(mod(t,2.) >= 2.){\n    for(float i = 0.; i < sin(t)*4.; i++){\n      uv=abs(uv)-.6275;\n      uv*=rot(t*20.);\n    //}\n  }\n  uv.y += sin(uv.x*.25);\n  //uv+=floor(rn(t*.05));\n  //uv*=rot(smoothstep(0., 1., rn(t)*2.+uv.x*.001));\n  \n  vec3 p=s;\n  vec3 cz=normalize(p-vec3(0.));\n  vec3 cx=normalize(cross(cz,vec3(0., -1., 0.)));\n  vec3 cy=normalize(cross(cz,cx));\n  \n  uv*=rot(t*5.3);\n  uv*=10.;\n  vec3 r=mat3(cx,cy,cz)*normalize(vec3(sign(uv)*smoothstep(12.,-25., pow(fract(uv+t*.154), vec2(.5)))*\n  dot(uv, vec2(-1.5))+sin(t*uv)*.15+4.5, 1.-length(uv)*.25+.25));\n  vec3 n,ld=normalize(vec3(-2., -1., -1.));\n  float i;\n  for(i= 0.; i < 128.; i++) if(d=m(p),p+=d*r,abs(d) < 0.0001 || d > 100.){\n    n=nm(p);\n    //if(g1< .001){\n      r=reflect(r,n);p+=45.;\n    //}\n    col = vec3(max(dot(ld,n), 0.));\n    col +=g1*.0031;\n    col=smoothstep(0., 1., col);\n    //col=sign(col) < vec3(.0) ? col:-col;\n    //break;\n  }\n  col *= i/(250.+sin(t*2000.)*20.+20.)*abs(nm(p).x*.555)-.15;\n  vec3 COL_BAS=vec3(.23, .25, 1.)*.25;\n  //COL_BAS.xz*=rot(c(t*.25));\n  col+=g3*vec3(.34, .46, .1)*.5;\n  col+=g2*vec3(.42, 0.1, 0.)*.5;\n  col+=g1*COL_BAS*.05;\n  //col-=length(p.xz)*.000000000000000001;\n  //col=1.-pow(col, vec3(3.535));\n  //col*=2.675-length(col)*.2395;\n  col=pow(col, vec3(2.));\n    fragColor = vec4(col,1.0);\n}","name":"Image","description":"","type":"image"}]}