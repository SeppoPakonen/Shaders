{"ver":"0.1","info":{"id":"ltGfDd","date":"1559835794","viewed":81,"name":"Text Printer","username":"rmccampbell7","description":"Functions for string handling and printing using int arrays.","likes":0,"published":1,"flags":0,"tags":[]},"renderpass":[{"inputs":[{"id":"4dXGzr","filepath":"/media/a/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","previewfilepath":"/media/ap/08b42b43ae9d3c0605da11d0eac86618ea888e62cdd9518ee8b9097488b31560.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define SL 16\n\n#define BOTLEFT vec2(0)\n#define BOTRIGHT vec2(iResolution.x, 0)\n#define TOPLEFT vec2(0, iResolution.y)\n#define TOPRIGHT iResolution.xy\n#define CENTER (iResolution.xy / 2.)\n#define CENTERX (iResolution.x / 2.)\n#define CENTERY (iResolution.y / 2.)\n\nconst int[SL] EMPTY = int[SL](0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\nconst int[SL] SPACE = int[SL](32, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n\nfloat print(vec2 pos, int char) {\n    if (pos.x < 0. || pos.y < 0. || pos.x >= 1. || pos.y >= 1.)\n        return 0.;\n    vec2 cell = vec2(char % 16, 15 - char / 16);\n    vec4 pix = texture(iChannel0, (cell + pos) / 16., -1.);\n    return pix.r;\n}\n\nfloat print(vec2 pos, int[SL] s) {\n    if (pos.x < 0. || pos.y < 0. || pos.x >= float(SL) || pos.y >= 1.)\n        return 0.;\n    int ind = int(pos.x);\n    int char = s[ind];\n    char = char > 0 ? char : 32;\n    vec2 ipart = vec2(char % 16, 15 - char / 16);\n    vec2 fpart = fract(pos);\n    vec4 pix = texture(iChannel0, (ipart + fpart) / 16., -1.);\n    return pix.r;\n}\n\nint[SL] num2str(float n) {\n    int[SL] s = EMPTY;\n    int i = 0;\n    if (n < 0.) {\n        s[i++] = 45; // '-'\n        n = -n;\n    }\n    int e = max(int(log2(n)/log2(10.)+1e-6), 0);\n    float p10 = pow(10., float(e));\n    for (; i<SL; i++) {\n        int d = int(n / p10);\n        s[i] = d + 0x30; // '0'\n        n = mod(n, p10);\n        if (e <= 0 && n < 1e-3)\n            break;\n        if (e == 0 && i+1 < SL)\n            s[++i] = 46; // '.'\n        e--;\n        p10 /= 10.;\n    }\n    return s;\n}\n\nint[SL] strcat(int[SL] s1, int[SL] s2) {\n    int[SL] s = EMPTY;\n    int j = 0;\n    for (int i=0; i<SL; i++, j++)\n        if ((s[j] = s1[i]) == 0) break;\n    for (int i=0; j<SL; i++, j++)\n        if ((s[j] = s2[i]) == 0) break;\n    return s;\n}\n\nint[SL] substr(int[SL] s, int i0, int i1) {\n    int[SL] s2 = EMPTY;\n    for (int i=i0, j=0; i<i1; i++, j++) {\n        s2[j] = s[i];\n    }\n    return s2;\n}\n\nint strlen(int[SL] s) {\n    for (int i=0; i<SL; i++)\n        if (s[i] == 0) return i;\n    return SL;\n}\n\nint[SL] str(int c0) { return int[SL](c0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0); }\nint[SL] str(int c0, int c1) { return int[SL](c0, c1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0); }\nint[SL] str(int c0, int c1, int c2) { return int[SL](c0, c1, c2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0); }\nint[SL] str(int c0, int c1, int c2, int c3) { return int[SL](c0, c1, c2, c3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0); }\nint[SL] str(int c0, int c1, int c2, int c3, int c4) { return int[SL](c0, c1, c2, c3, c4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0); }\nint[SL] str(int c0, int c1, int c2, int c3, int c4, int c5) { return int[SL](c0, c1, c2, c3, c4, c5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0); }\nint[SL] str(int c0, int c1, int c2, int c3, int c4, int c5, int c6) { return int[SL](c0, c1, c2, c3, c4, c5, c6, 0, 0, 0, 0, 0, 0, 0, 0, 0); }\nint[SL] str(int c0, int c1, int c2, int c3, int c4, int c5, int c6, int c7) { return int[SL](c0, c1, c2, c3, c4, c5, c6, c7, 0, 0, 0, 0, 0, 0, 0, 0); }\nint[SL] str(int c0, int c1, int c2, int c3, int c4, int c5, int c6, int c7, int c8) { return int[SL](c0, c1, c2, c3, c4, c5, c6, c7, c8, 0, 0, 0, 0, 0, 0, 0); }\nint[SL] str(int c0, int c1, int c2, int c3, int c4, int c5, int c6, int c7, int c8, int c9) { return int[SL](c0, c1, c2, c3, c4, c5, c6, c7, c8, c9, 0, 0, 0, 0, 0, 0); }\nint[SL] str(int c0, int c1, int c2, int c3, int c4, int c5, int c6, int c7, int c8, int c9, int c10) { return int[SL](c0, c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, 0, 0, 0, 0, 0); }\nint[SL] str(int c0, int c1, int c2, int c3, int c4, int c5, int c6, int c7, int c8, int c9, int c10, int c11) { return int[SL](c0, c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, c11, 0, 0, 0, 0); }\nint[SL] str(int c0, int c1, int c2, int c3, int c4, int c5, int c6, int c7, int c8, int c9, int c10, int c11, int c12) { return int[SL](c0, c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, 0, 0, 0); }\nint[SL] str(int c0, int c1, int c2, int c3, int c4, int c5, int c6, int c7, int c8, int c9, int c10, int c11, int c12, int c13) { return int[SL](c0, c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, 0, 0); }\nint[SL] str(int c0, int c1, int c2, int c3, int c4, int c5, int c6, int c7, int c8, int c9, int c10, int c11, int c12, int c13, int c14) { return int[SL](c0, c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, 0); }\nint[SL] str(int c0, int c1, int c2, int c3, int c4, int c5, int c6, int c7, int c8, int c9, int c10, int c11, int c12, int c13, int c14, int c15) { return int[SL](c0, c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15); }\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\n    // Time varying pixel color\n    vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));\n\n    //                H   e    l    l    o    ,\n    int[] hello = str(72, 101, 108, 108, 111, 44);\n    //                W   o    r    l    d    !\n    int[] world = str(87, 111, 114, 108, 100, 33);\n    //col += print((fragCoord-vec2(60,160))/40., strcat(strcat(hello, SPACE), world));\n    col += print(uv*vec2(16,9)-vec2(1.5,4), strcat(strcat(hello, SPACE), world));\n    col += print(uv*vec2(16,9)-vec2(4,2), num2str(-123.456));\n    col += print((fragCoord-TOPLEFT)/36.-vec2(0,-1), num2str(iResolution.x));\n    col += print((fragCoord-TOPLEFT)/36.-vec2(0,-2), num2str(iResolution.y));\n    col += print((fragCoord-TOPLEFT)/36.-vec2(0,-3), num2str(iFrameRate));\n    int[] datestr = strcat(strcat(strcat(num2str(iDate.y+1.), str(47)),\n                                  strcat(num2str(iDate.z), str(47))),\n                                         num2str(iDate.x));\n    col += print((fragCoord-TOPRIGHT)/36.-vec2(-strlen(datestr),-1), datestr);\n\n    col += print((fragCoord-vec2(10,10))/10., substr(hello, 0, 5));\n\n    // col += print((uv-.5)*vec2(10,5)+.5, 88); // X\n\n    // Output to screen\n    fragColor = vec4(col, 1.0);\n}\n","name":"Image","description":"","type":"image"}]}