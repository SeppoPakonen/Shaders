{"ver":"0.1","info":{"id":"WdsyzB","date":"1585077611","viewed":225,"name":"Mosaic with lens distortion","username":"DoubleRedGaming","description":"A really cool effect you can make, making use of mosaic and lens distortion effect.","likes":5,"published":3,"flags":0,"usePreview":0,"tags":[]},"renderpass":[{"inputs":[{"id":"4dX3Rn","filepath":"/media/a/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","previewfilepath":"/media/ap/bd6464771e47eed832c5eb2cd85cdc0bfc697786b903bfd30f890f9d4fc36657.jpg","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"Xsf3Rn","filepath":"/media/a/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","previewfilepath":"/media/ap/cbcbb5a6cfb55c36f8f021fbb0e3f69ac96339a39fa85cd96f2017a2192821b5.png","type":"texture","channel":1,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"vec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\nstruct uvp {\n    vec2 uv;\n    float mul;\n};\n\nuvp rec(in vec2 uv, in vec2 pos, in vec2 size, in float r) {\n    vec2 rotation = rotate(uv-pos, r);\n    vec2 result = (1.0 - step(rotation, -(size * 0.5))) * step(rotation, (size * 0.5));\n    \n    return uvp((rotation)/(size*2.0), result.x*result.y);\n}\n\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 uv = (fragCoord.xy-(0.5*iResolution.xy))/iResolution.y;\n    vec4 col = vec4(0.0);\n    \n    float uvDistort = -5.0+length(uv);\n    uv *= uvDistort;\n    \n    uv = uv*(0.5+(20.0*((sin(iTime*3.141*0.25)*0.5)+0.5)))+0.5;\n    \n    uv = fract(uv);\n    \n    uv -= 0.5;\n    \n    uvp rectangle1 = rec(uv, vec2(0.0), vec2(0.5), sin(iTime*3.141*0.125)*3.141*0.5);\n    uvp rectangle2 = rec(uv, vec2(0.0), vec2(0.5), sin(iTime*3.141*0.125)*3.141*0.5);\n    \n    vec4 t1 = texture(iChannel0, rectangle1.uv) * rectangle1.mul;\n    col = mix(col, t1, t1.w);\n    vec4 t2 = texture(iChannel1, rectangle2.uv*vec2(0.5, 4.0)+vec2(-iTime,0.5)) * rectangle2.mul;\n    col = mix(col, t2, t2.w);\n    \n    col *= pow((-uvDistort-4.0)*1.5, 0.5);\n    fragColor = col;\n}","name":"Image","description":"","type":"image"}]}