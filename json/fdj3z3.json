{"ver": "0.1", "info": {"id": "fdj3z3", "date": "1617742339", "viewed": 230, "name": "Bass and Flute", "username": "wildniklin", "description": "Feedback is appreciated. :)\nI know the music is very repetitive, I didn't bother to work too much on the music, just the instruments, for you all to use.", "likes": 2, "published": 3, "flags": 8, "usePreview": 0, "tags": [], "requires": ["soundbuf", "library", "imagebuf"]}, "renderpass": [{"inputs": [], "outputs": [{"id": "4dfGRr", "channel": 0}], "code": "void mainImage(out vec4 o, in vec2 i)\n{\n    i.y += floor(iTime * 40.0);\n    vec2 a = i;\n    i *= 0.125;\n    i = floor(i);\n    vec3 col = randomnoise13(i.x + i.y);\n    col += randomnoise13(i.x - i.y);\n    col *= 0.5;\n\n    o = vec4(col, 1.0);\n}", "name": "Image", "description": "", "type": "image"}, {"inputs": [], "outputs": [], "code": "precision highp float;\n\nconst float bpm = 80.0;\n    \nconst float PI = 3.14159265358979323846264338327950288419716939937510;\nconst float TAU = PI * 2.0;\n\nfloat saturate(float x) { return clamp(x, 0.0, 1.0); }\n\nfloat repeat(float x, float a) { return fract(x / a) * a; }\n\nfloat linearstep(float a, float b, float x) { return saturate((x - a) / (b - a)); }\n\nfloat fixedpow(float a, float b) { return pow(abs(a), b) * sign(a); }\n\nmat2 rot(float r)\n{\n    float s = sin(r), c = cos(r);\n    return mat2(c, -s, s, c);\n}\n\n// Music\n\nconst float C8 = 4186.01,  CK8 = 4434.92,   D8 = 4698.63,  DK8 = 4978.03,   E8 = 5274.04,  F8 = 5587.65,  FK8 = 5919.91,   G8 = 6271.93,  GK8 = 6644.88,   A8 = 7040.00,  AK8 = 7458.62,   B8 = 7902.13;\nconst float C7 = C8 * 0.5, CK7 = CK8 * 0.5, D7 = D8 * 0.5, DK7 = DK8 * 0.5, E7 = E8 * 0.5, F7 = F8 * 0.5, FK7 = FK8 * 0.5, G7 = G8 * 0.5, GK7 = GK8 * 0.5, A7 = A8 * 0.5, AK7 = AK8 * 0.5, B7 = B8 * 0.5;\nconst float C6 = C7 * 0.5, CK6 = CK7 * 0.5, D6 = D7 * 0.5, DK6 = DK7 * 0.5, E6 = E7 * 0.5, F6 = F7 * 0.5, FK6 = FK7 * 0.5, G6 = G7 * 0.5, GK6 = GK7 * 0.5, A6 = A7 * 0.5, AK6 = AK7 * 0.5, B6 = B7 * 0.5;\nconst float C5 = C6 * 0.5, CK5 = CK6 * 0.5, D5 = D6 * 0.5, DK5 = DK6 * 0.5, E5 = E6 * 0.5, F5 = F6 * 0.5, FK5 = FK6 * 0.5, G5 = G6 * 0.5, GK5 = GK6 * 0.5, A5 = A6 * 0.5, AK5 = AK6 * 0.5, B5 = B6 * 0.5;\nconst float C4 = C5 * 0.5, CK4 = CK5 * 0.5, D4 = D5 * 0.5, DK4 = DK5 * 0.5, E4 = E5 * 0.5, F4 = F5 * 0.5, FK4 = FK5 * 0.5, G4 = G5 * 0.5, GK4 = GK5 * 0.5, A4 = A5 * 0.5, AK4 = AK5 * 0.5, B4 = B5 * 0.5;\nconst float C3 = C4 * 0.5, CK3 = CK4 * 0.5, D3 = D4 * 0.5, DK3 = DK4 * 0.5, E3 = E4 * 0.5, F3 = F4 * 0.5, FK3 = FK4 * 0.5, G3 = G4 * 0.5, GK3 = GK4 * 0.5, A3 = A4 * 0.5, AK3 = AK4 * 0.5, B3 = B4 * 0.5;\nconst float C2 = C3 * 0.5, CK2 = CK3 * 0.5, D2 = D3 * 0.5, DK2 = DK3 * 0.5, E2 = E3 * 0.5, F2 = F3 * 0.5, FK2 = FK3 * 0.5, G2 = G3 * 0.5, GK2 = GK3 * 0.5, A2 = A3 * 0.5, AK2 = AK3 * 0.5, B2 = B3 * 0.5;\nconst float C1 = C2 * 0.5, CK1 = CK2 * 0.5, D1 = D2 * 0.5, DK1 = DK2 * 0.5, E1 = E2 * 0.5, F1 = F2 * 0.5, FK1 = FK2 * 0.5, G1 = G2 * 0.5, GK1 = GK2 * 0.5, A1 = A2 * 0.5, AK1 = AK2 * 0.5, B1 = B2 * 0.5;\nconst float C0 = C1 * 0.5, CK0 = CK1 * 0.5, D0 = D1 * 0.5, DK0 = DK1 * 0.5, E0 = E1 * 0.5, F0 = F1 * 0.5, FK0 = FK1 * 0.5, G0 = G1 * 0.5, GK0 = GK1 * 0.5, A0 = A1 * 0.5, AK0 = AK1 * 0.5, B0 = B1 * 0.5;\n\n// All hail asd, Attack, Sustain, and Decay function.\nfloat asd(float x, float attack, float sustain, float decay)\n{\n    return saturate(x / attack) * saturate(((attack + sustain + decay) - x) / decay);\n}\n\nvec2 chorus(float t, float depth)\n{\n    float s = sin(t);\n    return (vec2(s, -s) * depth) * 0.5 + 0.5;\n}\n\nfloat sine(float x) { return sin(x * PI); }\nfloat square(float x) { return fract(x * 0.5) > 0.5 ? -1.0 : 1.0; }\nfloat saw(float x) { return (fract(x * 0.5) * 2.0) - 1.0; }\nfloat triangle(float x) { return -(abs(fract(x * 0.5) - 0.5) * 4.0) - 1.0; }\n\n// Used to sound like a siren, now it sounds like something different, didn't bother to change name of this function anyway.\nvec2 bassguitar(float t, float rt, float freq)\n{\n    return vec2(sine(rt * freq), triangle(rt * freq)) * asd(t, 0.001, 0.0, 0.499) * rot(rt * PI * freq * 0.25);\n}\n\nvec2 piano(float t, float rt, float freq)\n{\n    float a = asd(t, 0.001, 0.0, 0.5);\n\n    float s = sine(rt * freq) + square(rt * freq) * 0.25;\n\n    return vec2(s * a);\n}\n\nvec2 flute(float t, float rt, float freq, float duration)\n{\n    float a = asd(t, 0.05, duration, 0.01);\n\n    float s = (sine(rt * freq) + sine(rt * (freq * 2.0))) * 0.5;\n\n    vec2 r = vec2(s, s) * chorus(rt * PI * 4.0, 0.1);\n\n    return r * a;\n}\n\nvec2 pattern_low_0(float t, float rt)\n{\n    return bassguitar(t + 0.25, rt, D4) +\n           \n           bassguitar(t, rt, C4) +\n           bassguitar(t - 0.125, rt, D4) +\n           bassguitar(t - 0.25, rt, F4) +\n           bassguitar(t - 0.375, rt, GK4) +\n           \n           bassguitar(t - 0.625, rt, F4) +\n           bassguitar(t - 0.75, rt, D4);\n}\n\nvec2 pattern_mid_0(float t, float rt)\n{\n    return flute(t + 0.5, rt, A5, 0.45) * 0.7 +\n    \n           flute(t, rt, C5, 0.2) +\n\n           flute(t - 0.25, rt, D5, 0.2) +\n\n           flute(t - 0.5, rt, A5, 0.2) * 0.7 +\n\n           flute(t - 0.75, rt, D5, 0.25) * 0.7;\n}\n\nvec2 mainSound(int samp, float time)\n{\n    float bt = (bpm / 240.0) * time;\n    float beat = fract(bt);\n\n    vec2 result = vec2(0.0, 0.0);\n    \n    result += pattern_low_0(beat, time) * 0.08;\n\n    result += pattern_mid_0(beat, time) * 0.25;\n\n    return result;\n}", "name": "Sound", "description": "", "type": "sound"}, {"inputs": [], "outputs": [], "code": "float randomnoise11(float p)\n{\n    return fract(sin(p * 12.9898) * 43758.5453123);\n}\n\nvec2 randomnoise12(float p)\n{\n    float x = randomnoise11(p);\n    return vec2(x, randomnoise11(p + x));\n}\n\nvec3 randomnoise13(float p)\n{\n    float x = randomnoise11(p);\n    float y = randomnoise11(p + x);\n    return vec3(x, y, randomnoise11(p + x + y));\n}", "name": "Common", "description": "", "type": "common"}]}