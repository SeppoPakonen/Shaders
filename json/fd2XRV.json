{"ver":"0.1","info":{"id":"fd2XRV","date":"1620639374","viewed":165,"name":"Neural CA","username":"Znah","description":"Neural CA\nhttps://selforglive.github.io/","likes":1,"published":1,"flags":32,"usePreview":0,"tags":[]},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    int W = int(iResolution.x) / 3;\n    vec2 p = fragCoord.yx;\n    p /= 2.0;\n    p.x = mod(p.x, float(W));\n \n    fragColor = texture(iChannel0, p/iResolution.xy)+0.5;\n    //fragColor = texture(iChannel1, fragCoord.xy/iResolution.xy)+0.5;\n}","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"int W;\nint band;\nivec2 pos;\n\nvec4 R(int dx, int dy) {\n    vec2 p = vec2((pos.x+dx+W)%W+W*band, pos.y+dy);\n    return texture(iChannel0, (p+0.5)/iResolution.xy);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    W = int(iResolution.x) / 3;\n    pos = ivec2(fragCoord.xy);\n    band = pos.x / W;\n    pos.x %= W;\n    \n    vec4 prev = texture(iChannel1, fragCoord/iResolution.xy);\n    \n    if (band == 2) {\n        fragColor = R(-1, 1)+R(-1, 0)*2.0+R(-1,-1)\n                   -R( 1, 1)-R( 1, 0)*2.0-R( 1,-1);\n    } else if (band == 1) {\n        fragColor = R( 1, 1)+R( 0, 1)*2.0+R(-1, 1)\n                   -R( 1,-1)-R( 0,-1)*2.0-R(-1,-1);\n    } else {\n        fragColor = R(1,1)+R(1,-1)+R(-1,1)+R(-1,-1)\n              +2.0*(R(0,1)+R(0,-1)+R(1,0)+R(-1,0))-12.0*R(0, 0);\n    }\n}","name":"Buffer A","description":"","type":"buffer"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1},{"id":"XsXGR8","filepath":"/media/previz/buffer01.png","previewfilepath":"/media/previz/buffer01.png","type":"buffer","channel":1,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"XsXGR8","channel":0}],"code":"vec4 update(float band, vec4 y[6]) {\n  #define M mat4\n  #define F(i,_a,_b) {M a=_a,b=_b; vec4 yi=y[i]; dx+=G(0)+G(1)+G(2)+G(3);}\n  #define G(i) yi[i]*((yi[i]>0.0)?a[i]:b[i])\n  vec4 dx;\n  if (band == 0.) { dx = vec4(3,-8,-25,-19);\n    F(0, M(-26,19,-12,10,0,-35,51,-3,9,-42,-84,13,-29,-26,3,-28), M(-58,-41,-28,64,2,-41,-33,-5,-10,43,-20,-31,-13,-8,-7,-23));\n    F(1, M(20,26,15,-2,17,17,24,-4,1,5,17,4,29,3,-8,28), M(-15,-22,-31,8,-10,-9,-8,-3,-21,-17,-10,-3,1,8,15,-1));\n    F(2, M(-16,2,4,7,-9,7,15,-4,3,0,25,-41,2,6,6,0), M(53,22,-24,-44,13,-17,-31,4,1,7,18,-1,-8,-7,-7,5));\n    F(3, M(30,10,0,-13,-5,24,14,6,-4,-8,17,-7,57,29,0,4), M(8,-10,-12,-4,2,21,8,1,-1,5,21,4,10,-31,-41,60));\n    F(4, M(-18,-14,-13,2,-21,-21,-18,6,14,25,23,-4,1,3,2,-1), M(4,4,-1,-6,2,3,5,1,-7,-5,-7,-6,2,4,2,-6));\n    F(5, M(5,5,4,-2,3,15,28,-5,0,29,26,7,-24,-22,-18,7), M(13,19,19,-5,-7,-15,-16,-7,15,9,9,0,7,1,-2,3));\n  } else if (band == 1.) { dx = vec4(4,-5,-9,15);\n    F(0, M(-11,11,33,-23,-12,34,51,-41,12,-49,-16,16,5,-13,0,-25), M(-31,18,7,27,-6,9,12,1,-7,33,40,-25,9,1,-7,10));\n    F(1, M(-95,-1,3,-2,-17,-43,13,1,-1,1,-72,6,3,23,-10,-44), M(-67,-6,-30,-11,-29,-95,16,-17,-15,-14,-56,-14,12,22,7,-87));\n    F(2, M(-2,2,-2,4,-11,26,32,-32,-23,17,30,-24,12,8,7,-23), M(-5,7,-1,21,17,5,11,7,5,-16,9,-1,18,-9,-20,-14));\n    F(3, M(-13,5,14,7,-1,5,4,0,7,2,10,-5,0,24,13,6), M(-4,-3,4,-3,-3,7,-1,4,5,3,10,-5,12,-18,-36,33));\n    F(4, M(-11,1,-7,-3,19,-4,2,2,-6,25,28,11,-26,-30,3,-4), M(-27,20,-5,-19,22,-3,18,-12,8,16,8,4,-19,-10,12,-4));\n    F(5, M(-1,5,3,-1,9,-4,8,-17,17,-7,-8,-11,9,-5,-5,-21), M(-6,6,11,-8,15,-16,-19,0,2,-5,4,-9,-6,10,8,-5));\n  } else { dx = vec4(-8,-2,-14,15);\n    F(0, M(36,29,18,-5,-9,76,20,-1,43,-37,-42,-11,-19,13,16,-13), M(27,-1,-24,-1,8,0,8,9,-33,75,5,32,24,-18,-15,-3));\n    F(1, M(4,5,-22,-1,36,14,4,-24,26,2,3,-3,8,4,11,-15), M(-35,-13,-3,12,-7,11,6,6,-7,-12,-7,7,-6,29,-15,22));\n    F(2, M(-82,5,13,19,12,-65,-5,6,7,21,-27,-15,-29,0,-36,-33), M(-35,-21,29,-2,30,-84,-41,1,15,5,-97,13,-19,17,0,-110));\n    F(3, M(15,7,10,1,5,6,-2,4,-11,12,-3,1,26,17,-14,-2), M(13,-2,9,-8,0,11,-4,4,-8,6,-8,8,4,-27,-57,15));\n    F(4, M(5,-9,8,-12,3,-13,-17,3,14,15,10,-11,-1,6,-8,4), M(12,2,16,-17,-7,-2,-10,17,-7,-8,14,-9,-5,7,18,-13));\n    F(5, M(7,5,1,-5,25,8,2,21,-19,11,-36,40,12,-4,-8,8), M(8,14,-2,6,25,-2,25,26,-1,15,-17,18,-2,17,22,-7));\n  }\n  #undef M\n  #undef F\n  #undef G\n  return dx/500.0;\n}\n\nvec4 hash43(vec3 p)\n{\n\tvec4 p4 = fract(vec4(p.xyzx)  * vec4(.1031, .1030, .0973, .1099));\n    p4 += dot(p4, p4.wzxy+33.33);\n    return fract((p4.xxyz+p4.yzzw)*p4.zywx);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    float W = floor(iResolution.x / 3.);\n    vec2 pos = fragCoord.xy;\n    pos.x = mod(pos.x, W);\n    float band = floor(fragCoord.x / W);\n    \n    vec4 y[6];\n    for (int i=0; i<3; ++i) {\n      vec2 p = vec2(pos.x+W*float(i), pos.y)/iResolution.xy;\n      y[i] = texture(iChannel1, p);\n      y[3+i] = texture(iChannel0, p);\n      \n    }\n    vec4 x = (band==0.) ? y[0] : ((band==1.) ? y[1] : y[2]);\n    vec4 dx = update(band, y);\n\n    vec4 mask = floor(hash43(vec3(fragCoord, iFrame)) + 0.5);\n    fragColor = x + dx*mask;\n}","name":"Buffer B","description":"","type":"buffer"}]}