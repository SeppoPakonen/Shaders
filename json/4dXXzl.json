{"ver": "0.1", "info": {"id": "4dXXzl", "date": "1405433256", "viewed": 427, "name": "CGA Colors", "username": "Daniil", "description": "320x200, 4 colors.\nBoth CGA palettes are used.", "likes": 9, "published": 1, "flags": 0, "tags": ["bits", "oldschool", "school"], "requires": ["texture", "videobuf", "imagebuf", "texturebuf"]}, "renderpass": [{"inputs": [{"id": "Xdf3Rn", "filepath": "/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm", "previewfilepath": "/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm", "type": "video", "channel": 0, "sampler": {"filter": "linear", "wrap": "clamp", "vflip": "false", "srgb": "false", "internal": "byte"}, "published": 1}, {"id": "Xdf3zn", "filepath": "/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png", "previewfilepath": "/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png", "type": "texture", "channel": 1, "sampler": {"filter": "nearest", "wrap": "repeat", "vflip": "false", "srgb": "false", "internal": "byte"}, "published": 1}], "outputs": [{"id": "4dfGRr", "channel": 0}], "code": "#define _ 0.0\n#define o (1./3.)\n#define b (2./3.)\n#define B 1.0\n\n#define check(r,g,b) color=vec4(r,g,b,0.); dist = distance(s,color); if (dist < bestDistance) {bestDistance = dist; bestColor = color;}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat dist;\n\tfloat bestDistance = 1000.;\n\tvec4 color;\n\tvec4 bestColor;\t\t\n\t\n\tvec2 pixel = vec2(320,200)-floor( fragCoord.xy / iResolution.xy * vec2(320,200));\n\tvec4 s = texture(iChannel0, pixel / vec2(320,200));\n\t\n\ts += (texture(iChannel1, pixel / iChannelResolution[1].xy)-0.5)*0.5;\n\t\n\t// pallete 0\n\t\n\tcheck(_,_,_);\n\tcheck(_,B,_);\n\tcheck(B,_,_);\n\tcheck(B,B,_);\n\t\n\tvec4 color1 = bestColor;\n\tbestDistance = 1000.;\n\t\n\t// pallete 1\n\t\n\tcheck(_,_,_);\n\tcheck(_,B,B);\n\tcheck(B,_,B);\n\tcheck(B,B,B);\n\t\n\tvec4 color2 = bestColor;\n\t\n\tfloat t = (clamp(sin(iTime)*4.,-1.,1.)+1.)/2.;\n\t\n\tfragColor = mix(color2, color1, t);\t\n}", "name": "Image", "description": "", "type": "image"}]}