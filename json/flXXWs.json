{"ver":"0.1","info":{"id":"flXXWs","date":"1626771911","viewed":334,"name":"hept32 :::. bitmagic hash","username":"ENDESGA","description":"Using some pretty neat bitmagic tricks, this cross-language integer hash (was made in C during testing and creation) gives some really good distribution statistics. In C, it showed some promising performance levels too!\n\nFeel free to suggest improvements!","likes":3,"published":3,"flags":0,"usePreview":0,"tags":[]},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"/*\n    777    777    777 \n\t7777   7777   7777\n\n\t777    777    777    777 \n\t7777   7777   7777   7777\n*/\n// Copyright \u00a9 2021 ENDESGA\n// MIT License:\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nuint HEPT32_SEED = 0x12334567u; // global seed, can be anything\n\nuint _HEPT32_X = 0x77777777u, _HEPT32_Y = 0x77777777u, _HEPT32_Z = 0x77777777u;\n\nuint hept32(uint x, uint y, uint z) {\t\n    x = (x * _HEPT32_X) - (~x * 0x77777777u) - ~(x * _HEPT32_Y);\n\ty = (y * _HEPT32_Y) - (~y * 0x77777777u) - ~(y * _HEPT32_Z);\n\tz = (z * _HEPT32_Z) - (~z * 0x77777777u) - ~(z * _HEPT32_X);\n\treturn ~(~(~x * y * z) * ~(x * ~y * z) * ~(x * y * ~z));\n}\n\nvoid hept32_seed(uint seed) {\n    // multi-layer seed expansion and extraction\n\tseed = (hept32(seed,seed,seed) * 0x77777777u) - 0x77777777u;\n\t_HEPT32_X = (hept32(0x77777777u,seed,seed) * seed) - seed;\n\t_HEPT32_Y = (hept32(seed,0x77777777u,seed) * seed) - seed;\n\t_HEPT32_Z = (hept32(seed,seed,0x77777777u) * seed) - seed;\n}\n\n// high-entropy reliable alternative, but a lot slower (4-6x slower in some tests in C++)\nuint hept32e(uint x, uint y) {\n    uint e = 0u;\n    \n    x = ((0xBBBBBBBBu * x)) * ((0xDDDDDDDDu - ~x) - HEPT32_SEED);\n\ty = ((0xEEEEEEEEu - y)) * ((0x77777777u * ~y) - HEPT32_SEED);\n    e = ~((x - y) * HEPT32_SEED);\n    x = ((0x7777EEDBu * x)) * ((0xBBBB77EDu - ~x) - e);\n\ty = ((0xDDDDBB7Eu - y)) * ((0xEEEEDDB7u * ~y) - e);\n    \n    x = (x >> 16) | (x << 16);\n    y = (y >> 16) | (y << 16);\n\te = ~(~(~x * y) * ~(x * ~y));\n    // all bit-planes now resemble complex noise even before the mix:\n    return (e ^ ~(e >> 16));\n}\n\n///////\n\nuint noise(uint x, uint y, uint z) {\n\n    return hept32(x,y,z);\n\n    // start of a blending/blur attempt\n    // probably need to be done with floats rather than uint?\n    return (\n        ((hept32(x,y,z) + hept32(x-1u,y,z) + hept32(x,y-1u,z) + hept32(x+1u,y,z) + hept32(x,y+1u,z)) / 5u) +\n        hept32(x,y,z)\n    ) >> 1;\n}\n\nvoid mainImage( out vec4 o, in vec2 i ) {\n    \n    // need to set the seed at least once\n    hept32_seed(7u);\n\n    o = vec4(vec3(float(noise(\n        uint(i.x + (iTime*77.777)),\n        uint(i.y + (iTime*77.777)),\n        7u)) * 2.32830644e-10), 1.0);\n}","name":"Image","description":"","type":"image"}]}