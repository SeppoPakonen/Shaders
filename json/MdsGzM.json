{"ver":"0.1","info":{"id":"MdsGzM","date":"1373316657","viewed":764,"name":"edge glow with box filter","username":"danielmarg","description":"edge glow with box filter edge detection","likes":13,"published":1,"flags":0,"tags":[]},"renderpass":[{"inputs":[{"id":"4sX3Rn","filepath":"/media/a/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","previewfilepath":"/media/ap/c3a071ecf273428bc72fc72b2dd972671de8da420a2d4f917b75d20e1c24b34c.ogv","type":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"const float kernelWidth = 3.;\nconst float kernelHeight = 3.;\nconst float kernelSize = kernelWidth * kernelHeight;\n\nvec2 getUV(vec2 fragCoord) {\n\treturn vec2(fragCoord.x / iResolution.x, fragCoord.y / iResolution.y);\n}\n\nbool isEdgeFragment(vec2 fragCoord) {\n\tfloat kernel[(int(kernelWidth * kernelHeight))];\n\tkernel[0] = -1.;\n\tkernel[1] = -1.;\n\tkernel[2] = -1.;\n\tkernel[3] = -1.;\n\tkernel[4] =  8.;\n\tkernel[5] = -1.;\n\tkernel[6] = -1.;\n\tkernel[7] = -1.;\n\tkernel[8] = -1.;\n\t\n\tvec4 result = vec4(0.);\n\tvec2 uv = getUV(fragCoord);\n\t\n\tfor(float y = 0.; y < kernelHeight; ++y) {\n\t\tfor(float x = 0.; x < kernelWidth; ++x) {\n\t\t\tresult += texture(iChannel0, vec2(uv.x + (float(int(x - kernelWidth / 2.)) / iResolution.x), \n\t\t\t\t\t\t\t\t\t\t\t\tuv.y + (float(int(y - kernelHeight / 2.)) / iResolution.y)))\n\t\t\t\t\t\t\t\t\t\t   * kernel[int(x + (y * kernelWidth))];\n\t\t}\n\t}\n\t\n\treturn ((length(result) > 0.2) ? true : false);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\tvec4 actualColor = texture(iChannel0, getUV(fragCoord));\n\tif(!isEdgeFragment(fragCoord)) {\n\t\tfragColor = actualColor;\n\t} else {\n\t\tfragColor = vec4(0., 1., 0., 1.) * sin(iTime * 5.) + actualColor * cos(iTime * 5.);\n    }\n}","name":"Image","description":"","type":"image"}]}