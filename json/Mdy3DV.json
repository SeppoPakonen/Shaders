{"ver":"0.1","info":{"id":"Mdy3DV","date":"1456429762","viewed":278,"name":"Bouncy Supershapes","username":"blurryroots","description":"Transitioning between different shapes produced by the superformula. https://en.wikipedia.org/wiki/Superformula","likes":5,"published":1,"flags":0,"tags":[]},"renderpass":[{"inputs":[{"id":"Xdf3zn","filepath":"/media/a/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","previewfilepath":"/media/ap/85a6d68622b36995ccb98a89bbb119edf167c914660e4450d313de049320005c.png","type":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"#define PI 3.14159\n#define TWO_PI 6.28319\n\nfloat superformula (float angle, vec4 shape, vec2 symmetry) {    \n    float m = shape.x;\n    float n1 = shape.y;\n    float n2 = shape.z;\n    float n3 = shape.w;\n    float a = symmetry.x;\n    float b = symmetry.y;\n\n    float rpart = (m * angle) / 4.;\n    float apart = abs (cos (rpart) / a);\n    float bpart = abs (sin (rpart) / b);\n\n    float r = pow (\n        pow (apart, n2) + pow (bpart, n3),\n        -1. / n1\n    );\n    \n    return r;\n}\n\nfloat angleBetween (vec2 a, vec2 b) {\n    float cosTheta = dot (a, b) / (length (a) * length (b));\n    \n    return acos (cosTheta);\n}\n\nvec4 createShape (float t) {    \n    float m = 1. + abs (sin (t) + cos (1.6 * t)) * 8.;\n    float n1 = 1. + abs (sin (2. * t) * 4.);\n    float n2 = 1. + (cos (t + PI / 1.6) * 2.);\n    float n3 = 2. + sin (1.6 * t + PI) * 4.;\n    \n    return vec4 (m, n1, n2, n3);\n}\n\nvec2 createSymmetry (float t) {\n    return  vec2 (.5 + sin (t + PI / 2.) * .5, .5 + cos (t) * .5);\n}\n\nvoid mainImage (out vec4 fragColor, in vec2 fragCoord) {\n    float radius = iResolution.y / 2.;\n    \n    vec2 center = iResolution.xy / 2.;\n    vec2 d = fragCoord - center;\n    vec2 up = vec2 (0., 1.);\n        \n    float t = iTime * 0.6;\n    float angle = angleBetween (up, d);\n    vec2 symmetry = createSymmetry (t);\n    vec4 shape = createShape (t);\n    float r = superformula (angle, shape, symmetry) * radius;\n    \n    float size = length (d); \n    \n    if (size <= r) {\n        fragColor = normalize (shape);\n    }\n    else if (size <= (r+0.1)) {\n        fragColor = vec4 (1.);\n    }\n    else {\n        fragColor = vec4 (0., 0., 0., 0.);\n    }\n}","name":"Image","description":"","type":"image"}]}