{"ver":"0.1","info":{"id":"XtlGRn","date":"1417929802","viewed":2685,"name":"Autostereogram","username":"zephmann","description":"autostereogram ","likes":14,"published":1,"flags":0,"tags":[]},"renderpass":[{"inputs":[{"id":"4dXGzn","filepath":"/media/a/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","previewfilepath":"/media/ap/0c7bf5fe9462d5bffbd11126e82908e39be3ce56220d900f633d58fb432e56f5.png","type":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"},"published":1}],"outputs":[],"code":"/* \n * zephyr mann\n * 2014\n */\n\nfloat pWid = 120.;\nfloat pHei = 100.;\n\nfloat getDepth(vec2 uv) {\n    float x = (uv.x - (iResolution.x*0.5)) / iResolution.x;\n\tfloat y = (uv.y - (iResolution.y*0.5)) / iResolution.x;\n    \n    float offX = sin(iTime * 1.) * 0.2;\n    float offY = cos(iTime * 0.666) * 0.2;\n    \n    float d = floor(abs(y*2. + offY + sin((x+iTime*0.25)*10.) * 0.25) * 20.) * 0.05;\n    d = 1. - d;\n    d = 1. - (d*d*d*d);\n    \n    return d;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float maxStep = 30.;\n    float d = 0.;\n    \n    vec2 uv = fragCoord.xy;\n    \n    for(int count = 0; count < 100; count++) {\n        if(uv.x < pWid)\n          break;\n        \n        float d = getDepth(uv);\n        //d = 1.;\n        \n        uv.x -= pWid - (d * maxStep);\n    }\n    \n    float x = mod(uv.x + iTime*1., pWid) / pWid;\n    float y = mod(uv.y + iTime*4., pHei) / pHei;\n    vec3 rgb = texture( iChannel0, vec2(x,y), -100.0 ).yxz;\n    \n\tfragColor = vec4(rgb,1.0);\n    \n    // view depth map\n    if(false)\n    \tfragColor = vec4(vec3(getDepth(fragCoord.xy)),1.0);\n        \n    \n    // add some guide dots\n    float dotWid = min(iResolution.y * 0.01, 5.0);\n    uv.x = (fragCoord.x - (iResolution.x*0.5));\n    uv.y = (fragCoord.y - (iResolution.y*0.5));\n    \n    if(distance(uv, vec2(maxStep*1.5,0.0)) < dotWid || distance(uv, vec2(-maxStep*1.5,0.0)) < dotWid)\n        fragColor = vec4(0.0);\n}","name":"","description":"","type":"image"}]}