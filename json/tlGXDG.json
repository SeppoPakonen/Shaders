{"ver":"0.1","info":{"id":"tlGXDG","date":"1583466061","viewed":158,"name":"Shapeshifting biome map","username":"jarble","description":"This map is based on my \"Swamps and Tundras\" map generator. This one is endlessly \"terraformed\" by a pseudorandom number generator.\n\nMove the mouse to zoom in and out!","likes":1,"published":3,"flags":0,"tags":[]},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"\n//This parameter changes the magnification.\nconst float mag = 9.0;\n\nconst float GREEN = 0.0;\nconst float BLUE = 1.0;\nconst float GRAY = 2.0;\nconst float YELLOW = 3.0;\nconst float WHITE = 4.0;\n\n//this function is from https://www.shadertoy.com/view/4djSRW\nfloat hash12(vec2 p,float mag)\n{\n    float num_colors = 5.0;\n    //set the number of colors to be randomly generated\n    \n    vec3 p3  = fract(vec3(p.xyx) * .1031);\n    p3 += dot(p3, p3.yzx + 33.33+iTime/(10000.0*mag));\n    return floor(fract((p3.x + p3.y) * p3.z)*num_colors);\n}\n\nfloat magnify(vec2 fragCoord,float mag){\n\treturn hash12(floor(fragCoord/pow(3.0,mag)),mag);\n}\n\nvec4 get_neighbors(vec2 fragCoord,float mag){\n\treturn vec4(magnify(fragCoord+vec2(0,1),mag),\n        magnify(fragCoord+vec2(1,0),mag),\n        magnify(fragCoord-vec2(0,1),mag),\n        magnify(fragCoord-vec2(1,0),mag));\n}\n\n\nbool is_next_to(float color,vec4 neighbors){\n\treturn (neighbors.x == color)\n        || (neighbors.y == color)\n        || (neighbors.z == color)\n        || (neighbors.w == color);\n}\n\n\nvec3 get_color(float color){\n    return color == BLUE\n    \t? vec3(0.149,0.141,0.912)\n   \t:color == GREEN\n    \t? vec3(0.000,0.833,0.224)\n   \t:color == WHITE\n    \t? vec3(1.0,1.0,1.0)\n   \t:color == GRAY\n    \t? vec3(192.0,192.0,192.0)/255.0\n    :color == YELLOW\n    \t? vec3(1.0,1.0,0.0)\n   \t:vec3(1.0,1.0,1.0);\n}\n\nfloat iterations(float color1,in vec2 fragCoord,float mag){\n    vec4 neighbors;\n    while(mag > 1.0){\n    neighbors = get_neighbors(fragCoord,mag);\n\n    color1 = color1 == GREEN && is_next_to(BLUE,neighbors)\n    \t? YELLOW\n    :color1 == BLUE && is_next_to(GREEN,neighbors)\n        ? GREEN\n    :color1 == YELLOW && is_next_to(GRAY,neighbors)\n        ? BLUE\n    :color1 == GRAY && is_next_to(YELLOW,neighbors)\n        ? YELLOW\n    :color1 == WHITE && is_next_to(YELLOW,neighbors)\n        ? GRAY\n    :color1 == GRAY && is_next_to(BLUE,neighbors)\n        ? BLUE\n    :color1;\n    mag -= 1.0;\n    }\n    return color1;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragCoord *= mag*(((iMouse.x-iMouse.y)*2.0+iResolution.x)/iResolution.x);\n    fragCoord = fragCoord;\n    float color1 = magnify(fragCoord,mag);\n    //color1 = replace_pattern(mat2(1.0,1.0,1.0,1.0),mat2(0.0,2.0,2.0,0.0),fragCoord,mag);\n\n    color1 = iterations(color1,fragCoord,mag-1.0);\n\n    fragColor = vec4(get_color(color1),1.0);\n}","name":"Image","description":"","type":"image"}]}