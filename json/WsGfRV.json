{"ver": "0.1", "info": {"id": "WsGfRV", "date": "1607462736", "viewed": 59, "name": "Smudge 20.12.08", "username": "maximkamalov", "description": "A 2D SDF smudge, based on rectangle, with Russian comments.", "likes": 1, "published": 1, "flags": 0, "usePreview": 0, "tags": [], "requires": ["imagebuf"]}, "renderpass": [{"inputs": [], "outputs": [{"id": "4dfGRr", "channel": 0}], "code": "// NOTE: Comments below are in Russian.\n// Leave a comment if you want an English version.\n\n// \u0426\u0432\u0435\u0442\u0430.\n#define FG vec3(.0, .0, .0)\n#define BG vec3(.9, .9, .9)\n\n// \u0424\u043e\u0440\u043c\u0443\u043b\u0430 \u0438\u0441\u043a\u0430\u0436\u0435\u043d\u0438\u044f \u0444\u0438\u0433\u0443\u0440\u044b \u043f\u0443\u0442\u0435\u043c \u0432\u043e\u043b\u043d\u043e\u043e\u0431\u0440\u0430\u0437\u043d\u043e\u0433\u043e \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0442\u0443\u0440\u0430.\n// \u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u0430 z \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043e\u0434\u043d\u043e\u043e\u0431\u0440\u0430\u0437\u043d\u044b\u0445 \u0432\u043e\u043b\u043d.\n// \u0414\u043b\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0430\u043c\u043f\u043b\u0438\u0442\u0443\u0434\u044b \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0443\u043c\u043d\u043e\u0436\u0438\u0442\u044c \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u0441\u043b\u0435 \u0432\u044b\u0437\u043e\u0432\u0430.\n// \u0421\u043e\u0432\u0435\u0442: \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u0447\u0430\u0441\u0442\u043e\u0442\u0443 \u043d\u0430 \u0432\u0435\u043a\u0442\u043e\u0440, \u0447\u0442\u043e\u0431\u044b \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044e \u0431\u044b\u043b\u0430 \u0441\u0432\u043e\u044f.\nfloat displacement(in vec3 p, in float freq)\n{\n    return\n        // \u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u0443\u043c\u043d\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u0432\u0443\u0445 \u0432\u043e\u043b\u043d \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u043a\u043b\u044f\u043a\u0441\u043e\u043e\u0431\u0440\u0430\u0437\u043d\u043e\u0439 \u0444\u043e\u0440\u043c\u044b,..\n        sin(freq*p.x) * sin(freq*p.y)\n        // ...\u043d\u043e \u0441 \u0442\u0440\u0435\u0442\u044c\u0435\u0439 \u0447\u0430\u0441\u0442\u044c\u044e \u043c\u043e\u0436\u043d\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0432\u0441\u0435, \u0447\u0442\u043e \u0432\u0437\u0434\u0443\u043c\u0430\u0435\u0442\u0441\u044f.\n        // (\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u0443\u043c\u043d\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u043b\u043e\u0436\u0435\u043d\u0438\u044f.)\n        * sin(freq*p.z);\n}\n\n// \u041f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u0443\u043b\u044b \u0438\u0441\u043a\u0430\u0436\u0435\u043d\u0438\u044f.\nfloat opDisplace(\n    // \u041d\u0435\u0438\u0441\u043a\u0430\u0436\u0435\u043d\u043d\u043e\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435.\n    in float d1,\n    // \u0422\u043e\u0447\u043a\u0430, \u043e\u0442 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0438\u0437\u043c\u0435\u0440\u044f\u0435\u0442\u0441\u044f \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435.\n    // (\u0427\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u044c \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f, \u043c\u043e\u0436\u043d\u043e \u0435\u0435 \u0441\u0430\u043c\u0443 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c, \u0438\u043b\u0438 \u043d\u0435 \u0435\u0435.)\n    in vec2 p,\n    // \u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u044f.\n    in float amplitude,\n    // \u0427\u0430\u0441\u0442\u043e\u0442\u0430 \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0439.\n    in float frequency,\n    // \u0422\u0440\u0435\u0442\u0438\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440.\n\tin float time)\n{\n    float d2 =\n        displacement(vec3(p, time), frequency)\n        * amplitude;\n    return d1 + d2;\n}\n\n// \u0424\u043e\u0440\u043c\u0443\u043b\u0430 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0434\u043e \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a\u0430.\nfloat sdBox( in vec2 p, in vec2 b )\n{\n    vec2 d = abs(p)-b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n    // Convert to [-1, 1].\n    uv = uv * 2. - 1.;\n        \n    float dist = sdBox(uv, vec2(.5, .5));\n    dist = opDisplace(\n        dist,\n        uv,\n        .5,\n        8.,\n        // \u042d\u0442\u0443 \u0444\u043e\u0440\u043c\u0443\u043b\u0443 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043a\u0438\u043d\u0443\u0442\u044c \u0438 \u043f\u043e\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u044e\u0431\u0443\u044e \u0434\u0440\u0443\u0433\u0443\u044e.\n        // (\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, length(uv + iMouse.xy) / 111. + uv.x / 3.)\n        uv.x / 5. + uv.y / 3. + iTime / 64.);\n    \n    // \u0412\u043d\u0443\u0442\u0440\u0438 \u2014 0, \u0441\u043d\u0430\u0440\u0443\u0436\u0438 \u2014 1, \u043d\u0430 \u0433\u0440\u0430\u043d\u0438\u0446\u0435 \u2014 \u043f\u043b\u0430\u0432\u043d\u044b\u0439 \u043f\u0435\u0440\u0435\u0445\u043e\u0434.\n    float col = smoothstep(-.02, .02, dist);\n    \n    vec3 color = mix(FG, BG, col);\n    // Output to screen\n    fragColor = vec4(color,1.0);\n}", "name": "Image", "description": "", "type": "image"}]}