{"ver":"0.1","info":{"id":"3sK3z1","date":"1569734899","viewed":339,"name":"Spiral Truchet Strips","username":"pjkarlik","description":"Totally an accident while trying to learn Spiral/Polar twists. Im not sure what I did in the math but I like this a lot. Mashup of the Truchet design from another shader. Un/Comment line 39 for Truchet Magic.","likes":23,"published":3,"flags":0,"tags":[]},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"precision mediump float;\n\nfloat tense = 1.2;\n/** even numbers work best for this in truchet mode \t\t*/\nfloat twist = 2.;\n/** works best with odd numbers - even causes visible seam \t*/\nfloat radial = 5.;\n\n#define PI 3.14159265\n \nfloat hash(vec2 p) {\n\tp = fract(p*vec2(931.733,354.285));\n\tp += dot(p,p+39.37);\n\treturn fract(p.x*p.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ){\n    /** Set some basic stuff */\n\tvec2 R = iResolution.xy;\n    vec2 uv = fragCoord.xy;\n\tvec2 UV = fragCoord.xy/iResolution.xy;\n    \n    float speed = iTime * 1.15;\n    \n    /** Do the warp and spin - trying to understand the math */\n    uv = (uv.xy + uv.xy-R)/R.y;\n    uv= vec2(0., speed - log2(length(uv))) + atan(uv.y, uv.x) * twist / 6.283;\n    uv.x *=radial;\n    \n\n    /** Start the tile design */\n  \tvec2 tile_uv = fract(uv) -.5;\n    vec2 id = floor(uv);\n    float n = hash(id);\n    float checker = mod(id.y + id.x,2.) * 2. - 1.;\n    vec3 col = vec3(1.);\n    \n    \n    /** Un/comment for Spiral/Circles/Truchet Spin  */\n    /** Can be both, none or one - active\t\t    */\n    \n    if(n>.5)tile_uv.x *= -1.;\n  \t//if(checker>.5)tile_uv.x *= -1.;\n   \n        \n    float d = abs(abs(tile_uv.x+tile_uv.y)-.5);\n    vec2 cUv = tile_uv-sign(tile_uv.x+tile_uv.y+.001)*.5;\n    d = length(cUv);\n    //bar thickness//\n    float width = .15; //.2 + .2 * sin(iTime*.5);\n    \n    float pix = fwidth(length(uv));\n    float mask = smoothstep(pix, -pix, abs(d-.5)-width);\n\n    float angle = atan(cUv.x, cUv.y);\n    //stripes on bar - 30 gets rough//\n    float freq = 26.; // <-- must be even number\n    float stripes = sin(checker * angle * freq + iTime * 26.);\n    \n    float k = freq*checker;\n    pix = fwidth(angle); \n    if (pix>1.) {\n        pix =.04;\n        //pix-=3.14159; // artifacts?\n    }\n    \n    stripes = smoothstep(1., -1., stripes/abs(k*pix))\n              * smoothstep(0.,1.,PI/abs(k)/pix);\n    mask *= stripes;\n\n    col *= mask;\n\tcol = mix(vec3(0.,UV.y*.75,1.-UV.y),vec3(.9),col);\n   // col -= vec3(pix*2.); //see discontinuity\n    fragColor = vec4(col, 1.);\n}\n\n\n","name":"Image","description":"","type":"image"}]}