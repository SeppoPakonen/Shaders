{"ver": "0.1", "info": {"id": "XstGRB", "date": "1450478373", "viewed": 327, "name": "clamped barrel distortion", "username": "radikai", "description": "clamped barrel distortion", "likes": 5, "published": 1, "flags": 0, "usePreview": 0, "tags": ["barrel_distortion"], "requires": ["texture", "videobuf", "imagebuf"]}, "renderpass": [{"inputs": [{"id": "Xdf3Rn", "filepath": "/media/a/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm", "previewfilepath": "/media/ap/e81e818ac76a8983d746784b423178ee9f6cdcdf7f8e8d719341a6fe2d2ab303.webm", "type": "video", "channel": 0, "sampler": {"filter": "linear", "wrap": "clamp", "vflip": "true", "srgb": "false", "internal": "byte"}, "published": 1}], "outputs": [], "code": "vec2 barrelDistort(vec2 pos, float power)\n{\n\tfloat t = atan(pos.y, pos.x);\n\tfloat r = pow(length(pos), power);\n\tpos.x   = r * cos(t);\n\tpos.y   = r * sin(t);\n\treturn 0.5 * (pos + 1.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 q  = fragCoord.xy / iResolution.xy;\n\tvec2 p  = -1.0 + 2.0*q;\n\tfloat d = length(p);\n\n\tfloat s = 1.0 - min(1.0, d*d);\n\n\tfloat t = abs(iTime) / 0.5;\n\tfloat barrel_pow = 1.0 + 0.5 * (1.0 + cos(t));\n\tp = barrelDistort(p, barrel_pow);\n\n\tfragColor = texture(iChannel0, s * (p-q) + q );\n}\n", "name": "", "description": "", "type": "image"}]}