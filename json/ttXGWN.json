{"ver":"0.1","info":{"id":"ttXGWN","date":"1556327203","viewed":845,"name":"Edge detection and other filters","username":"xavierseb","description":"edge detection and other filters by working with the channel instead of the raster pixels as is normally done","likes":2,"published":3,"flags":2,"tags":[]},"renderpass":[{"inputs":[{"id":"4sf3zn","filepath":"/presets/webcam.png","previewfilepath":"/presets/webcam.png","type":"webcam","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// basic sobel edge detection and other convolution filters\n//\n// horizontal edge detection:\n// [  1  2  1 ]\n// [  0  0  0 ]\n// [ -1 -2 -1 ]\n//\n// vertical edge detection:\n// [  1  0  -1 ]\n// [  2  0  -2 ]\n// [  1  0  -1 ]\n//\n// all\n// [ 0 -1 0 ]\n// [ -1 4 -1 ]\n// [ 0 -1 0 ]\n//\n// sharpen\n// [ -1 -1 -1 ]\n// [ -1 9 -1 ]\n// [ -1 -1 -1 ]\n\n#define filter 3\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord/iResolution.xy;\n    \n    fragColor = \n#if filter==1\n       // horizontal\n         \t\ttexture(iChannel0, uv*vec2(.99, .99))\n         \t\t+texture(iChannel0, uv*vec2(1.0, .99)) *2.0\n         \t\t+texture(iChannel0, uv*vec2(1.01, .99))\n         \t\t-texture(iChannel0, uv*vec2(.99, 1.01))\n         \t\t-texture(iChannel0, uv*vec2(1.00, 1.01)) *2.0\n         \t\t-texture(iChannel0, uv*vec2(1.01, 1.01));\n#elif filter==2\n       // vertical edges\n         \t\ttexture(iChannel0, uv*vec2(.99, .99))\n         \t\t+texture(iChannel0, uv*vec2(.99, 1.00)) *2.0\n         \t\t+texture(iChannel0, uv*vec2(.99, 1.01))\n         \t\t-texture(iChannel0, uv*vec2(1.01, .99))\n         \t\t-texture(iChannel0, uv*vec2(1.01, 1.00)) *2.0\n         \t\t-texture(iChannel0, uv*vec2(1.01, 1.01));\n#elif filter==3\n       // all\n        \t\ttexture(iChannel0, uv) *4.\n         \t\t-texture(iChannel0, uv*vec2(1.00, 0.99))\n         \t\t-texture(iChannel0, uv*vec2(0.99, 1.00))\n         \t\t-texture(iChannel0, uv*vec2(1.01, 1.00))\n         \t\t-texture(iChannel0, uv*vec2(1.00, 1.01));\n#elif filter==4\n       // sharpen\n        \t\ttexture(iChannel0, uv) *2.\n         \t\t-texture(iChannel0, uv*vec2(.99, 0.99))/8.\n         \t\t-texture(iChannel0, uv*vec2(1.00, .99))/8.\n         \t\t-texture(iChannel0, uv*vec2(1.01, .99))/8.\n         \t\t-texture(iChannel0, uv*vec2(.99, 1.00))/8.\n         \t\t-texture(iChannel0, uv*vec2(1.01, 1.00))/8.\n         \t\t-texture(iChannel0, uv*vec2(0.99, 1.01))/8.\n         \t\t-texture(iChannel0, uv*vec2(1.00, 1.01))/8.\n         \t\t-texture(iChannel0, uv*vec2(1.01, 1.01))/8.;\n#else\n       // blur\n    \t\t\ttexture(iChannel0, uv*vec2(.99, 0.99))/8.\n         \t\t+texture(iChannel0, uv*vec2(1.00, .99))/8.\n         \t\t+texture(iChannel0, uv*vec2(1.01, .99))/8.\n         \t\t+texture(iChannel0, uv*vec2(.99, 1.00))/8.\n         \t\t+texture(iChannel0, uv*vec2(1.01, 1.00))/8.\n         \t\t+texture(iChannel0, uv*vec2(0.99, 1.01))/8.\n         \t\t+texture(iChannel0, uv*vec2(1.00, 1.01))/8.\n         \t\t+texture(iChannel0, uv*vec2(1.01, 1.01))/8.;\n#endif\n}","name":"Image","description":"","type":"image"}]}