{"ver":"0.1","info":{"id":"Wst3Wn","date":"1568214480","viewed":233,"name":"roadToHell","username":"foran","description":"roadToHell","likes":20,"published":1,"flags":0,"tags":[]},"renderpass":[{"inputs":[],"outputs":[{"id":"4dfGRr","channel":0}],"code":"float obj(vec3 p)\n{\n  vec3 pp = p;\n  pp.z = mod(p.x, 110.)-55.;//  \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430\n  float d=  -abs(p.x-1.)+63.;\n  return d;\n}\n\nfloat obj2(vec3 p)\n{\n  float d = length(p.xy-vec2(1.+cos(p.z),0.+sin(p.z)))-.21;//  \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0441\u043f\u0438\u0440\u0430\u043b\u0438  .21\n  return d;\n}\n\nfloat map(vec3 p)\n{\n  float d = dot(cos(p.xyz), sin(p.zxy))+1.;\n  d += cos(p.z*10.)*.1;\n  d = min(d, obj(p));\n  d = min(d, obj2(p));\n\n  return d*.8;//  \u0433\u043b\u0443\u0431\u0438\u043d\u0430 .8\n}\n\nvec3 normal(vec3 p)\n{\n  vec3 n;\n  vec2 eps = vec2(0.01,0.);\n  n.x = map(p) - map(p+eps.xyy);\n  n.y = map(p) - map(p+eps.yxy);\n  n.z = map(p) - map(p+eps.yyx);\n\n  return normalize(n);\n}\n\nmat2 rotate(float v)\n{\n  float a = cos(v);\n  float b = sin(v);\n  return mat2(a,b,-b,a);\n}\n\nvec3 raymarch(vec3 ro, vec3 rd)\n{\n  vec3 p = ro;\n\n  for(int i=0; i<64; i++)\n  {\n    float d = map(p);\n    p += rd * d;\n  }\n\n  return p;\n}\n\nvec3 shade( vec3 ro, vec3 rd, vec3 p, vec3 n)//  color\n{\n  vec3 ld = normalize(vec3(.1,1.,-.5));\n  vec3 col = vec3(0.);\n\n  col = vec3(1.) * max(0., dot(n,ld))*.43;//                              \u044f\u0440\u043a\u043e\u0441\u0442\u044c \u0431\u0435\u043b\u043e\u0433\u043e \u0441\u0432\u0435\u0442\u0430 .3\n  col+=mix(vec3(0.7882, 0.098, 0.1529),vec3(0.0902, 0.8196, 1.0),rd.y)*length(p-ro)*.05;//  \u0446\u0432\u0435\u0442 \u0433\u0440\u0430\u0434\u0438\u0435\u043d\u0442\u0430 \u043f\u043e rd.y\n\n  return col;\n}\n\nvoid mainImage(out vec4 fragColor,in vec2 fragCoord)\n{\n  vec2 uv=vec2(fragCoord.x/iResolution.x,fragCoord.y/iResolution.y);\n  uv-=.5;\n  uv/=vec2(iResolution.y/iResolution.x,1);\n  \n    vec3 ro = vec3(1.,0.,-iTime);//  -iTime \u0442\u0443\u0434\u0430, +iTime \u043e\u0431\u0440\u0430\u0442\u043d\u043e\n    vec3 rd = normalize(vec3(uv*2.,-1.));//  uv*2 \u0440\u0430\u0441\u0442\u044f\u043d\u0443\u0442\u044c, -1. \u0440\u0430\u0441\u0448\u0438\u0440\u0438\u0442\u044c\n    vec3 p = raymarch(ro,rd);//  \u0440\u044d\u0439\u043c\u0430\u0440\u0448\n    vec3 n = normal(p);\n    vec3 col = shade(ro, rd, p, n);//  \u0446\u0432\u0435\u0442 \u0433\u0440\u0430\u0434\u0438\u0435\u043d\u0442\u0430 \u0438 \u0441\u0432\u0435\u0442\n\n  vec4 out_color=vec4(1.);\n  out_color = vec4(col, 1.);\n  fragColor=vec4(out_color);\n}","name":"Image","description":"","type":"image"}]}