{"ver": "0.1", "info": {"id": "tlBXRw", "date": "1565832211", "viewed": 193, "name": "Noise Square Tunnel 2.5D", "username": "Yusef28", "description": "I was trying to make something else but this is cool too I guess", "likes": 19, "published": 1, "flags": 0, "tags": ["25d"], "requires": ["texture", "imagebuf", "texturebuf"]}, "renderpass": [{"inputs": [{"id": "4sXGRn", "filepath": "/media/a/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg", "previewfilepath": "/media/ap/95b90082f799f48677b4f206d856ad572f1d178c676269eac6347631d4447258.jpg", "type": "texture", "channel": 1, "sampler": {"filter": "mipmap", "wrap": "repeat", "vflip": "true", "srgb": "false", "internal": "byte"}, "published": 1}, {"id": "4df3Rr", "filepath": "/media/a/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg", "previewfilepath": "/media/ap/3871e838723dd6b166e490664eead8ec60aedd6b8d95bc8e2fe3f882f0fd90f0.jpg", "type": "texture", "channel": 0, "sampler": {"filter": "mipmap", "wrap": "repeat", "vflip": "true", "srgb": "false", "internal": "byte"}, "published": 1}], "outputs": [{"id": "4dfGRr", "channel": 0}], "code": "float random (in vec2 st) {\n    return fract(sin(dot(st.xy,\n                         vec2(12.9898,78.233)))*\n        43758.5453123);\n}\n\n\n// Based on Morgan McGuire @morgan3d\n// https://www.shadertoy.com/view/4dS3Wd\nfloat noise (in vec2 st) {\n    vec2 i = floor(st);\n    vec2 f = fract(st);\n\n    // Four corners in 2D of a tile\n    float a = random(i);\n    float b = random(i + vec2(1.0, 0.0));\n    float c = random(i + vec2(0.0, 1.0));\n    float d = random(i + vec2(1.0, 1.0));\n\n    vec2 u = f * f * (3.0 - 2.0 * f);\n\n    return mix(a, b, u.x) +\n            (c - a)* u.y * (1.0 - u.x) +\n            (d - b) * u.x * u.y;\n}\n\n#define OCTAVES 4\nfloat fbm (in vec2 st) {\n    st/=2.;\n    st+=iTime/8.;\n    // Initial values\n    float value = 0.0;\n    float amplitude = .5;\n    float frequency = 0.;\n    //\n    // Loop of octaves\n    for (int i = 0; i < OCTAVES; i++) {\n        value += amplitude * noise(st);\n        st *= 2.;\n        amplitude *= .5;\n    }\n    return value/2000.;\n}\nmat2 rot(float a)\n{\n return mat2(cos(a), -sin(a), sin(a), cos(a));   \n}\nfloat shadowCircle(vec2 p, float r, float i)\n    {\n        p +=vec2(0.02, 0.02)*rot(iTime/100.);//light direction\n        \n        float a  =atan( p.y,p.x);\n        float shape = fbm(p);//sin(a*i+i/1.*iTime/10.+iTime)/10.;\n \tfloat ss = 0.07;\n    float k = 1.0-smoothstep(r-ss, r+ss, max(abs(p.x),abs(p.y))-0.2+shape);\n    return pow(k,1.1);\n}\n\nfloat rimCircle(vec2 p, float r, float i)\n{\n    float a  =atan( p.y,p.x);\n    float shape = fbm(p);//sin(a*i+i/1.*iTime/10.+iTime)/10.;\n \tfloat ss = 0.004;//0.0053\n    \n    float rim = 0.004;\n    float k = smoothstep(r-ss, r+ss, max(abs(p.x),abs(p.y))-0.2+shape);\n    float k2 = smoothstep(r-ss+rim, r+ss+rim, max(abs(p.x),abs(p.y))-0.2+shape);\n    k =k-k2;\n    return clamp(k/2., 0.0, 1.);\n}\n\nfloat Circle(vec2 p, float r, float i)\n{\n \tfloat ss = 0.009;\n    float a  =atan( p.y,p.x);\n    float shape = fbm(p);//sin(a*i+i/1.*iTime/10.+iTime)/10.;\n    \n    float k = smoothstep(r-ss, r+ss, max(abs(p.x),abs(p.y))-0.2+shape);   \n    return k+rimCircle(p,r-0.001, i);//shadowCircle(p,r);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord/iResolution.xy;\n\tuv = uv*2.0-1.0;\n    uv.x*=iResolution.x/iResolution.y;\n   uv/=1.5;\n    \n    ///uv.x+=0.5;\n    float t1 = vec3(texture(iChannel0,uv)).x;\n    float t2 = vec3(texture(iChannel1,uv)).x;\n    vec3 col = vec3(0.9);\n    vec3 col2 = vec3(0.);\n    // Time varying pixel color\n    float druck = 0.0;\n    //uv-=vec2(2.);\n    //col = mix(col, vec3(1.), rimCircle(uv, 0.8));\n\n    float num = 20.;\n    float minWidth = -0.2;\n    for(float i = 0.;i<num;i++){\n        uv/= .9+mod(fract(i +iTime/20.), 0.4);\n            \n        uv*=rot(i+iTime/30.*random(vec2(i*8.+1., i+1.))*2.);\n        t1 = vec3(texture(iChannel0,uv/2.)).x;\n        t2 = vec3(texture(iChannel1,uv/1.)).x;\n\n    \tcol *=shadowCircle(uv, minWidth+i/num, i);  \n        \n        //color wahle\n        col2 = vec3( 0.2+i/num, 0.2+i/num, 1.);\n        col2 = vec3( 0.2+i/num*1., 0.2+i/num/2., 0.3)+0.1;\n        //col2 = vec3( pow(i/num, 3.), pow(i/num, 2.),pow(i/num, 3.))+0.3;\n        col2 = vec3( pow(i/num, 4.), pow(i/num, 2.),pow(i/num, 1.5))+0.65;\n\n    col = mix(col, col2 -t1*step(1.,mod(i,2.))-t2*1.2*(1.0-step(1.,mod(i,2.))), Circle(uv, minWidth+i/num, i));\n\tcol = mix(col, col2, rimCircle(uv, minWidth+i/num, i)*i/num);\n    //uv+=vec2(0.4,0.2);\n        \n    }\ncol = sin(col+0.05);    \n    // Output to screen\n    fragColor = vec4(pow(col, vec3(1.)),1.0);\n}", "name": "Image", "description": "", "type": "image"}]}