{"ver":"0.1","info":{"id":"wllczn","date":"1592728168","viewed":84,"name":"Pencil writings","username":"kastorp","description":"Funny writings based on attempt to reverse-engineer Spalmer's reverse-engineering of a Wyatt shader\n\nuse mouse to write your thoughts on the wall","likes":7,"published":1,"flags":32,"tags":[]},"renderpass":[{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dfGRr","channel":0}],"code":"// Fork of \"Fluid Redux 2D\" by spalmer. https://shadertoy.com/view/Wtlczn\n// which is a fork of \"Spiral Waves 3D\" by wyatt https://shadertoy.com/view/wtXcRn\n\n#define R\t\tiResolution.xy\n#define T(q) texture(iChannel0, (q)/R)\n\nvoid mainImage(out vec4 Q, vec2 u)\n{\n    Q = T(u); \n    if(mod(iTime,10.)<5.)\n    Q = vec4(.2 + Q.y*2. + fract(Q.y*16. +.1)*.5,.2+(Q.x-Q.y)*5.,Q.x*30. +.2, 1);  //rainbow writings\n\telse Q = sign(T(u))/2. +.5;  \n}\n\n","name":"Image","description":"","type":"image"},{"inputs":[{"id":"4dXGR8","filepath":"/media/previz/buffer00.png","previewfilepath":"/media/previz/buffer00.png","type":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"},"published":1}],"outputs":[{"id":"4dXGR8","channel":0}],"code":"#define R iResolution.xy\n#define Z  R.x*.03\n#define T(q) texture(iChannel0, (q)/R)\n#define TS .3\n#define PI 3.14\n#define P vec2(Z*3.,Z*7.5)\n#define time mod(iTime,TS*72.)\n#define dt (time-rt)/TS\n\n#define Average(u) (1. / 4. * ( \\\n    T(u+vec2(0,1)) \\\n  + T(u-vec2(0,1)) \\\n  + T(u+vec2(1,0)) \\\n  + T(u-vec2(1,0)) \\\n  ).x)\n\n\nvoid PDESim(inout vec2 Q, float m)\n{\n\tconst float // \n\t  k0 = .02  // affects diffusion\n\t, k1 = 1e-4 // seems to control delay\n\t, k2 = 10.   // something about wavelength\n\t, k3 = 1.   // same as k2\n\t, k4 = 500.  // affects feedback\n\t, k5 = .006 // affects decay\n\t;\n    \n    Q.x += k0*(m-Q.x)+k1*((Q.x*(k2-Q.x)*(Q.x-k3))-k4*Q.y);\n\tQ.y += k5*(Q.x-Q.y);\n}\n\n\n\n\nvoid mainImage(out vec4 Q, vec2 u)\t\t\t\t\t\n{\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\n    if(iFrame<1) Q=vec4(0.); \n    else Q = T(u);\n    \n\tPDESim(Q.xy, Average(u));\t\t\t\t\n\n     vec2 pen=vec2(-1.);\n \t float rt=0.;\n \t//S\n     if(time<TS ) {pen= vec2(3.*Z-dt*Z,4.* Z)+P;}\n     else if(time<TS *2.) {pen= vec2(sin(dt*PI),-cos(dt*PI))*Z+vec2(2.*Z,3.* Z)+P;}\n     else if(time<TS *3.) {pen= vec2(sin(dt*PI),cos(dt*PI))*Z+vec2(2.*Z,1.* Z)+P;}\n     else if(time<TS*4. ) {rt=TS*3.; pen= vec2(2.*Z-dt*Z,0.)+P;}\n     //H\n    else if(time<TS*6. ) {rt=TS*4.; pen= vec2(4.*Z,4.* Z-dt*Z*2.)+P;} \n    else if(time<TS*8. ) {rt=TS*6.; pen= vec2(6.*Z,4.* Z-dt*Z*2.)+P;}\n    else if(time<TS*9. ) {rt=TS*8.; pen= vec2(4.*Z +dt*Z*2.,2.* Z)+P;}\n    //A\n    else if(time<TS*10. ) {rt=TS*9.; pen= vec2(7.*Z +dt*Z,dt*Z*4.)+P;}\n    else if(time<TS*11. ) {rt=TS*10.; pen= vec2(8.*Z +dt*Z,4.*Z -dt*Z*4.)+P;}\n    else if(time<TS*12. ) {rt=TS*11.; pen= vec2(7.5*Z +dt*Z,2.*Z )+P;}\n    //D\n    else if(time<TS*14. ) {rt=TS*12.; pen= vec2(10.*Z,4.* Z-dt*Z*2.)+P;} \n    else if(time<TS*16.) {rt=TS*14.;pen= vec2(sin(dt*PI/2.),-cos(dt*PI/2.))*Z*2.+vec2(10.*Z,2.* Z)+P;}\n    //E\n    else if(time<TS*18. ) {rt=TS*16.; pen= vec2(13.*Z,4.* Z-dt*Z*2.)+P;} \n\telse if(time<TS*19. ) {rt=TS*18.; pen= vec2(13.*Z +dt*Z*2.,4.* Z)+P;}\n    else if(time<TS*20. ) {rt=TS*19.; pen= vec2(13.*Z +dt*Z*2.,2.* Z)+P;}\n    else if(time<TS*21. ) {rt=TS*20.; pen= vec2(13.*Z +dt*Z*2.,0.* Z)+P;}\n \t//R\n    else if(time<TS*23. ) {rt=TS*21.; pen= vec2(16.*Z,4.* Z-dt*Z*2.)+P;}\n    else if(time<TS*25.) {rt=TS*23.; pen= vec2(sin(dt*PI/2.)*2.,cos(dt*PI/2.))*Z*1.+vec2(16.*Z,3.* Z)+P;}\n\telse if(time<TS*26. ) {rt=TS*25.; pen= vec2(16.*Z +dt*Z*2.,2.* Z-dt*Z*2.)+P;}\n    //T\n    else if(time<TS*27. ) {rt=TS*26.; pen= vec2(19.*Z+dt*Z*2.,4.* Z)+P;} \n    else if(time<TS*29. ) {rt=TS*27.; pen= vec2(20.*Z,4.* Z-dt*Z*2.)+P;} \n     //O\n    else if(time<TS*33.) {rt=TS*29.; pen= vec2(sin(dt*PI/2.),cos(dt*PI/2.)*2.)*Z+vec2(23.*Z,2.* Z)+P;}\n     //Y\n    else if(time<TS*34. ) {rt=TS*33.; pen= vec2(25.*Z +dt*Z,4.* Z-dt*Z*2.)+P;}\n    else if(time<TS*35. ) {rt=TS*34.; pen= vec2(27.*Z -dt*Z,4.* Z-dt*Z*2.)+P;}\n    else if(time<TS*36. ) {rt=TS*35.; pen= vec2(26.*Z ,2.* Z-dt*Z*2.)+P;}\n \n\tif(pen.x>0.&& length(u-pen) < Z/3.)Q.x = 1.;\n    if (iMouse.z>0. && length(u-iMouse.xy)  < Z/3.)Q.x = 1.;\n}\n","name":"Buffer A","description":"","type":"buffer"}]}