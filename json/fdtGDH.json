{"ver": "0.1", "info": {"id": "fdtGDH", "date": "1629721502", "viewed": 101, "name": "Hexagonal Tiling SDF", "username": "TheTurk", "description": "Distance function for a hexagonal tiling (circumradius = 1).", "likes": 3, "published": 1, "flags": 0, "usePreview": 0, "tags": [], "requires": ["imagebuf"]}, "renderpass": [{"inputs": [], "outputs": [{"id": "4dfGRr", "channel": 0}], "code": "float hexagon(vec2 position) {\n    position /= vec2(sqrt(3.0), 1.5);\n    position.y -= 0.5;\n    position.x -= fract(floor(position.y) * 0.5);\n    position = abs(fract(position) - 0.5);\n    return abs(1.0 - max(position.x + position.y * 1.5, position.x * 2.0)) * sqrt(3.0) * 0.5;\n}\n\n/* \n// first attempt\nfloat hexagon(vec2 position) {\n    position.x /= sqrt(3.0) * 0.5;\n    position.y += position.x * 0.5; // skew\n\tvec2 fractPosition = fract(position);  \n    vec2 floorPosition = floor(position);\n\tfloat i = floor(fract((floorPosition.x + floorPosition.y) / 3.0) * 3.0 + 0.5);\n    if (i == 0.0) {\n        return min(1.0 - fractPosition.x, 1.0 - fractPosition.y) * sqrt(3.0) * 0.5;\n    }\n    if (i == 1.0) {\n        return min(fractPosition.x, fractPosition.y) * sqrt(3.0) * 0.5;\n    } \n    return abs(fractPosition.y - fractPosition.x) * sqrt(3.0) * 0.5;\n}\n*/\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n    vec2 position = fragCoord / iResolution.xy;\n    position = (position * 2.0) - 1.0;\n    position.x *= iResolution.x / iResolution.y;\n    float spacing = 0.0;\n    float scale =  0.5;\n    float d = hexagon(position / scale) * scale - spacing;\n    // same colorization that Inigo Quilez uses in his shaders\n    vec3 color = vec3(1.0) - sign(d) * vec3(0.1, 0.4, 0.7); // base color\n    color *= 1.0 - exp(-4.0 * abs(d)); // gradient\n\tcolor *= 0.8 + 0.2 * cos(120.0 * d); // ripples\n\tcolor = mix(color, vec3(1.0), 1.0 - smoothstep(0.0, 0.01 , abs(d)));\n    if (iMouse.z > 0.001) {\n        vec2 mousePosition = iMouse.xy / iResolution.xy;\n        mousePosition = (mousePosition * 2.0) - 1.0;\n        mousePosition.x *= iResolution.x / iResolution.y;\n        float d = hexagon(mousePosition / scale) * scale - spacing;\n        color = mix(color, vec3(1.0, 1.0, 0.0), 1.0 - smoothstep(0.0, 0.0025, abs(length(position - mousePosition) - abs(d)) - 0.0025));\n    }\n    fragColor = vec4(color, 1.0) ;\n}", "name": "Image", "description": "", "type": "image"}]}