{"ver": "0.1", "info": {"id": "XdfGzH", "date": "1362154661", "viewed": 1871, "name": "post: Screen Distort", "username": "hornet", "description": "warps outwards radially while leaving center untouched", "likes": 26, "published": 1, "flags": 0, "tags": ["post", "distort", "ai", "screen"], "requires": ["texture", "imagebuf", "texturebuf"]}, "renderpass": [{"inputs": [{"id": "4dfGRn", "filepath": "/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg", "previewfilepath": "/media/ap/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg", "type": "texture", "channel": 0, "sampler": {"filter": "mipmap", "wrap": "repeat", "vflip": "false", "srgb": "false", "internal": "byte"}, "published": 1}], "outputs": [], "code": "// ====\n//note: period of 2, [-1;1]=/\\ \nfloat sawtooth( float t ) {\n\treturn abs(mod(abs(t), 2.0)-1.0);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n\t\n    float distpow = 5.0;\n    if ( iMouse.z > 0.5 )\n        distpow = (1.2-iMouse.x / iResolution.x) * 10.0;\n    \n\t//note: domain distortion\n\tconst vec2 ctr = vec2(0.5,0.5);\n\tvec2 ctrvec = ctr - uv;\n\tfloat ctrdist = length( ctrvec );\n\tctrvec /= ctrdist;\n\tuv += ctrvec * max(0.0, pow(ctrdist, distpow)-0.0025);\n\t\n\t\n\t//note: lines\n\tvec2 div = 40.0 * vec2(1.0, iResolution.y / iResolution.x );\n\tfloat lines = 0.0;\n\tlines += smoothstep( 0.2, 0.0, sawtooth( uv.x*2.0*div.x ) );\n\tlines += smoothstep( 0.2, 0.0, sawtooth( uv.y*2.0*div.y ) );\n\tlines = clamp( lines, 0.0, 1.0 );\n\t\n\tvec3 outcol = vec3(0.0);\n\toutcol += texture( iChannel0, vec2(0,1)+vec2(1,-1)*uv ).rgb;\n\toutcol *= vec3(1.0-lines); //black\n\t//outcol += vec3(lines); //white\n\n\t//note: force black outside valid range\t\n\tvec2 valid = step( vec2(0.0), uv ) * step( uv, vec2(1.0) );\n\toutcol *= valid.x*valid.y;\n\t\n\tfragColor = vec4(outcol,1.0);\n}", "name": "Image", "description": "", "type": "image"}]}